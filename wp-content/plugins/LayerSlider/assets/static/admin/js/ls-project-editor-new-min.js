!function($){$.fn.isEmpty=function(){return!$.trim(this.html())}}(jQuery);var removeEmptyElements=function(e){return e.filter((e=>e))},lsEditor={};jQuery(document).ready((function($){$.extend(!0,lsEditor,{settings:{nameSpace:"lsE",mouseMoveEndTimer:500,autoHideContextMenuTimer:500,timelineHeight:322},init:function(){lsEditor.cache.create(),lsEditor.localStorage.load(),lsEditor.workspace.init(),lsEditor.dropZone.createEvents(),lsEditor.notify.init(),lsEditor.workspace.createEvents(),lsEditor.navigation.createEvents(),lsEditor.preview.createEvents(),lsEditor.revisions.createEvents(),lsEditor.gui.createEvents(),lsEditor.actions.createEvents(),lsEditor.tinyNote.createEvents(),lsEditor.form.createEvents(),lsEditor.contextMenu.createEvents(),lsEditor.smartHelp.createEvents(),lsEditor.smartHelp.init(),lsEditor.smartInputs.createEvents(),lsEditor.smartDropdown.init(),lsEditor.smartDropdown.createEvents(),lsEditor.tooltip.createEvents(),lsEditor.maxClicks.createEvents(),lsEditor.formRows.createEvents(),lsEditor.layers.createEvents(),lsEditor.slidesList.createEvents(),lsEditor.tabs.init(),lsEditor.tabs.createEvents(),lsEditor.maxClicks.init(),lsEditor.rulers.init(),lsEditor.slideMenu.init(),lsEditor.contextMenu.init(),lsEditor.formRows.init(),lsEditor.project.createEvents(),lsEditor.project.init(),lsEditor.workspace.zoom.set(100,!1,!0,!0)},timeouts:{},actions:{createEvents:function(){$("body").on("input."+lsEditor.settings.nameSpace+" click."+lsEditor.settings.nameSpace,"[data-lse-action]",(function(e){let t,s=$(this);s.is("input, textarea, select")&&"click"===e.type||(s.is('input[type="range"], input[type="number"]')&&(t=parseInt(s.val())),lsEditor.actions.do($(this).attr("data-lse-action"),t))}))},utils:{setOptions:function(e,t){t?(e.current=t,e.next=Object.keys(e)[Object.keys(e)[0]==t?1:0]):(e.current=Object.keys(e)[1],e.next=Object.keys(e)[0])},toggleOptions:function(e){var t=e.current;e.current=e.next,e.next=t},updateOptions:function(e,t){return t&&e[t]?this.setOptions(e,t):e.current&&e.next?this.toggleOptions(e):this.setOptions(e),e.current},set:{elementsByAction:function(e){$('[data-lse-action="'+e+'"]').each((function(){let t=$(this);t.is(":checkbox")?lsEditor.actions.utils.set.checkbox(t,lsEditor.actions[e].options):t.is("select")?lsEditor.actions.utils.set.select(t,lsEditor.actions[e].options):t.is('input[type="range"], input[type="number"]')?lsEditor.actions.utils.set.number(t,lsEditor.actions[e].value):t.hasClass("lse-no-toggle")&&!t.hasClass("lse-can-be-activated")||lsEditor.actions.utils.set.canBeToggled(t,lsEditor.actions[e].options)}))},select:function(e,t){e.find("option").removeAttr("selected"),e[0].value=t.current},number:function(e,t){e.val(t)},checkbox:function(e,t){e.prop("checked",t[t.current].checked)},canBeToggled:function(e,t){e[t[t.current].toggleClass+"Class"]("lse-active")}}},defaults:{false:{checked:!1,toggleClass:"remove"},true:{checked:!0,toggleClass:"add"}},defaultsReverse:{true:{checked:!0,toggleClass:"add"},false:{checked:!1,toggleClass:"remove"}},positionLayersList:{options:{left:{checked:!0,toggleClass:"add"},right:{checked:!1,toggleClass:"remove"}},f:function(e,t,s){lsEditor.layersList.position(e,t,s)}},closeLayersList:{f:function(e,t,s){lsEditor.layersList.close(e,t,s)}},pinLayersList:{options:"reverse",f:function(e,t,s){lsEditor.layersList.pin(e,t,s)}},bringSelectionToFront:{options:"reverse",f:function(e,t,s){lsEditor.workspace.bringSelectionToFront(e,t,s)}},showRulers:{options:"reverse",f:function(e,t,s){lsEditor.workspace.showRulers(e,t,s)}},showGuides:{options:"reverse",f:function(e,t,s){lsEditor.workspace.showGuides(e,t,s)}},overflowLayers:{options:"reverse",f:function(e,t,s){lsEditor.workspace.overflowLayers(e,t,s)}},showTinyNote:{options:"reverse",f:function(e,t,s){lsEditor.workspace.showTinyNote(e,t,s)}},setOverscroll:{f:function(e,t,s){lsEditor.workspace.setOverscroll(e,t,s)}},dockLayersList:{options:"reverse",f:function(e,t,s){lsEditor.layersList.dock(e,t,s)}},wideSidebar:{f:function(e,t,s){lsEditor.sidebar.wide(e,t,s)}},highlightLayers:{options:"reverse",f:function(e,t,s){lsEditor.layers.setHighlight(e,t,s)}},layerSnapping:{options:"reverse",f:function(e,t,s){lsEditor.layers.setSnapping(e,t,s)}},autoSelectLayers:{options:"reverse",f:function(e,t,s){lsEditor.layers.setAutoSelect(e,t,s)}},autoCloseSectionTabs:{f:function(e,t,s){lsEditor.workspace.autoCloseSectionTabs(e,t,s)}},do:function(e,t,s){$.isNumeric(t)?this[e].value=t:(this[e].options||(this[e].options=$.extend(!0,{},this.defaults)),"reverse"==this[e].options&&(this[e].options=$.extend(!0,{},this.defaultsReverse)),t=this.utils.updateOptions(this[e].options,t)),this.utils.set.elementsByAction(e),this[e].f(t,e,s)}},cache:{data:{"lse-editor":"","#lse-loading":"loading","lse-workspace":"w","lse-dropzone-overlay":"do","lse-dropzone":"d","lse-workspace-frame":"wf","lse-workspace-wrapper":"ww","lse-workspace-helper":"wh","lse-stop-overflow-layers":"sol","lse-workspace-content":"wc","lse-preview-wrapper":"pw","lse-preview-area":"pa","lse-project-frame":"pf","lse-layer-highlight":"lh","lse-layers-list":"layersList","lse-slides-list":"slidesList","lse-timeline-frame":"timeline","lse-revisions-frame":"revisions","lse-guide.lse-guides-h":"guidesH","lse-guide.lse-guides-v":"guidesV","#lse-ruler-wrapper-h":"rulerWrapH","#lse-ruler-wrapper-v":"rulerWrapV","#lse-ruler-wrapper-h .lse-ruler":"rulerH","#lse-ruler-wrapper-v .lse-ruler":"rulerV","#lse-ruler-wrapper-h lse-pointer-indicator":"pointerH","#lse-ruler-wrapper-v lse-pointer-indicator":"pointerV","lse-tiny-note":"tinyNote"},items:{ellipsis:"#lse-ellipsis-opener",ellipsisMenu:"#lse-ellipsis-menu"},getItem:function(e){return $(this.items[e]||e)},create:function(){for(var e in this.data)window["$"+lsEditor.settings.nameSpace+this.data[e]]=$(e)}},colorPicker:{config:{minicolors:{format:"hex",opacity:"0",showSpeed:0,hideSpeed:0,animationSpeed:0},draggable:{containment:"parent",axis:"x",delay:50},sortable:{items:".lse-grad-sample:not(:first)",connectWith:".lse-grad-sample-trash",scroll:!1,delay:50},knob:{}},previewSelector:"",deleteThreshold:22,initialized:!1,init:function(e){lsEditor.colorPicker.$form=$(e),lsEditor.colorPicker.form=lsEditor.colorPicker.$form[0],lsEditor.colorPicker.$type=$(lsEditor.colorPicker.form.type).on("change.grad",$.proxy(lsEditor.colorPicker,"onChangeType")),lsEditor.colorPicker.$bg=$(".lse-grad-bg",lsEditor.colorPicker.form).on("click.grad",$.proxy(lsEditor.colorPicker,"onAddSwatch")),lsEditor.colorPicker.$slider=$(".lse-grad-slider",lsEditor.colorPicker.form).on("drag.grad",".lse-grad-stop",$.proxy(lsEditor.colorPicker,"onDragSwatch")).on("dragstop.grad",".lse-grad-stop",$.proxy(lsEditor.colorPicker,"onDragStopSwatch")).on("click.grad",".lse-grad-del",$.proxy(lsEditor.colorPicker,"onDeleteSwatch")).on("click.grad dragstart.grad",".lse-grad-stop",$.proxy(lsEditor.colorPicker,"onSelectSwatch")),lsEditor.colorPicker.$color=$(lsEditor.colorPicker.form.colorInput).minicolors(lsEditor.colorPicker.config.minicolors).appendTo(".lse-grad-color-wrapper .minicolors"),lsEditor.colorPicker.swatch=$(".minicolors-swatch-color",lsEditor.colorPicker.form)[0],lsEditor.colorPicker.swatchObserver=new MutationObserver($.proxy(lsEditor.colorPicker,"updateColor")),lsEditor.colorPicker.swatchObserver.observe(lsEditor.colorPicker.swatch,{attributes:!0,attributeFilter:["style"]}),lsEditor.colorPicker.$opacity=$(".minicolors-opacity-slider",lsEditor.colorPicker.form),lsEditor.colorPicker.$trash=$($("#tmpl-btn-trash").html()).insertAfter(lsEditor.colorPicker.$color).on("click.grad",$.proxy(lsEditor.colorPicker,"onDeleteSwatch")),lsEditor.colorPicker.$knob=$(".lse-knob-wrapper",lsEditor.colorPicker.form),lsEditor.colorPicker.angleInstance=AngleInput(lsEditor.colorPicker.$knob[0],lsEditor.colorPicker.config.knob),lsEditor.colorPicker.$knob.on("input.grad",(function(){lsEditor.colorPicker.$angle.val(lsEditor.colorPicker.form.angle.value).trigger("input")})),lsEditor.colorPicker.$angle=$(lsEditor.colorPicker.form.gradAngle).on("input.grad",(function(){let e=parseInt(lsEditor.colorPicker.$angle.val());e=isNaN(e)?90:e,lsEditor.colorPicker.angleInstance(e),lsEditor.colorPicker.updateGradient()})),lsEditor.colorPicker.$form.on("input.grad",$.proxy(lsEditor.colorPicker,"updateGradient")),lsEditor.colorPicker.initSamples(),lsEditor.colorPicker.initialized=!0},initSamples:function(){if(lsEditor.colorPicker.$samples=$(".lse-grad-sample-list",lsEditor.colorPicker.form).sortable(lsEditor.colorPicker.config.sortable).on("click.grad",".lse-grad-sample-add",$.proxy(lsEditor.colorPicker,"onAddSample")).on("click.grad",".lse-grad-sample-bg",$.proxy(lsEditor.colorPicker,"onApplySample")).on("sortstart.grad",$.proxy(lsEditor.colorPicker,"onDragStartSample")).on("sortstop.grad",$.proxy(lsEditor.colorPicker,"onDragStopSample")),lsEditor.colorPicker.samples=lsEditor.localStorage.data?.colorPicker?.samples||[],!lsEditor.colorPicker.initialized)for(var e=lsEditor.colorPicker.samples.length;e--;)lsEditor.colorPicker.createSample(lsEditor.colorPicker.samples[e]);lsEditor.colorPicker.$sampleTrash=$(".lse-grad-sample-trash",lsEditor.colorPicker.form).sortable()},createSample:function(e){$('<div class="lse-grad-sample-bg">').css("background",e).attr("data-color",e).wrap('<div class="lse-grad-sample">').parent().insertAfter(".lse-grad-sample-add")},load:function(e,t,s){e=e||"color",(t=t||{}).angle=parseInt(t.angle),t.angle=isNaN(t.angle)?90:t.angle,"color"===e?lsEditor.colorPicker.$type.parent().hide(0):lsEditor.colorPicker.$type.parent().show(0),lsEditor.colorPicker.previewSelector=s,lsEditor.colorPicker.color=t.color||"",lsEditor.colorPicker.$angle.val(t.angle),lsEditor.colorPicker.$angle.triggerHandler("input"),lsEditor.colorPicker.$angle.triggerHandler("change"),t.stops=t.stops||[],t.stops[0]=t.stops[0]||{color:"#c7286a",stop:"0%"},t.stops[1]=t.stops[1]||{color:"#4069ff",stop:"100%"},lsEditor.colorPicker.$slider.children().draggable("destroy").remove();for(let e=0;e<t.stops.length;e++)lsEditor.colorPicker.createSwatch(t.stops[e]);t.shape&&(lsEditor.colorPicker.form.shape.value=t.shape),t.position&&(lsEditor.colorPicker.form.position.value=t.position),lsEditor.colorPicker.changeType(t.type||""),lsEditor.colorPicker.updateTrash()},createSwatch:function(e){var t=parseFloat(e.stop);if(!e.color){var s=lsEditor.colorPicker.getColors(),l=Object.keys(s).sort((function(e,t){return e-t}));if(l.length>1){for(var o=l.length;o--&&l[o]>=t;);for(var i=0;i<l.length&&l[i]<t;i++);var r=l[o],a=l[i];if(r&&a){var n=s[r].split(/\(|, |\)/),d=s[a].split(/\(|, |\)/);i=1-(o=(t-r)/(a-r)),e.color="rgba("+[Math.round(i*n[1]+o*d[1]),Math.round(i*n[2]+o*d[2]),Math.round(i*n[3]+o*d[3]),i*(n[4]||1)+o*(d[4]||1)].join(", ")+")"}else e.color=r?s[l[--i]]:s[l[++o]]}else e.color="rgba(0, 0, 0, 0)"}return $('<div class="lse-grad-stop"><div class="lse-grad-swatch">').css({left:t*(lsEditor.colorPicker.$form.width()-2)/100,color:e.color}).prependTo(lsEditor.colorPicker.$slider).draggable(lsEditor.colorPicker.config.draggable).get(0)},selectSwatch:function(e){$(lsEditor.colorPicker.selected=e||lsEditor.colorPicker.$slider[0].children[0]).addClass("lse-grad-selected").siblings(".lse-grad-selected").removeClass("lse-grad-selected"),lsEditor.colorPicker.$color.minicolors("value",lsEditor.colorPicker.color2hexObject(lsEditor.colorPicker.selected.style.color))},destroySwatch:function(e){$(e).draggable("destroy").remove(),lsEditor.colorPicker.selectSwatch(),lsEditor.colorPicker.updateTrash(),lsEditor.colorPicker.updateGradient()},getTypeClass:function(){return"lse-grad-type--"+(lsEditor.colorPicker.$type.val().replace("-gradient","")||"solid")},getData:function(){var e={type:lsEditor.colorPicker.form.type.value,color:lsEditor.colorPicker.color};if("linear-gradient"===e.type){let t=parseFloat(lsEditor.colorPicker.form.gradAngle.value);t=isNaN(t)?90:t,e.angle=t,e.stops=lsEditor.colorPicker.getStops()}else"radial-gradient"===e.type&&(e.shape=lsEditor.colorPicker.form.shape.value,e.position=lsEditor.colorPicker.form.position.value,e.stops=lsEditor.colorPicker.getStops());return e},getJSON:function(){return JSON.stringify(lsEditor.colorPicker.getData())},getStops:function(){var e=lsEditor.colorPicker.getColors();return Object.keys(e).sort((function(e,t){return e-t})).map((function(t){return t=Math.round(t),new lsEditorColorStop(e[t],t+"%")}))},getColors:function(){var e,t,s={},l=lsEditor.colorPicker.$slider.width();return $(".lse-grad-stop:not([hidden])",lsEditor.colorPicker.$slider).each((function(o,i){e=parseInt(i.style.left),t=Math.round(e/l*100),s[t]=$(i).css("color")})),s},getBackgroundImage:function(e){if(e=e||lsEditor.colorPicker.getStops(),"linear-gradient"===lsEditor.colorPicker.form.type.value){let t=parseFloat(lsEditor.colorPicker.form.gradAngle.value);t=isNaN(t)?90:t,e.unshift(t+"deg")}else e.unshift(lsEditor.colorPicker.form.shape.value+" at "+lsEditor.colorPicker.form.position.value);return lsEditor.colorPicker.form.type.value+"("+e.join(", ")+")"},color2hexObject:function(e){var t=e.split(/\(\s*|\s*,\s*|\s*\)/);return{color:0!==t[0].indexOf("rgb")?e:"#"+("0"+parseInt(t[1]).toString(16)).slice(-2)+("0"+parseInt(t[2]).toString(16)).slice(-2)+("0"+parseInt(t[3]).toString(16)).slice(-2),opacity:parseFloat(t[4]||1)}},updateColorInput:function(e){lsEditor.smartHelp.$wrapper.find("input").val(e).data("color",lsEditor.colorPicker.getData()).trigger("input"),LayerSlider.setActiveLayerMedia()},getColorInputValue:function(){let e=lsEditor.colorPicker.$color.val(),t=LS_Utils.parseHex(e);return t&&(e=t),e},updateGradient:function(){if(!lsEditor.colorPicker.form.type.value)return $(lsEditor.colorPicker.previewSelector).css({backgroundImage:"",backgroundColor:lsEditor.colorPicker.getColorInputValue()}),void lsEditor.colorPicker.updateColorInput(lsEditor.colorPicker.getColorInputValue());var e=lsEditor.colorPicker.getStops();$(".lse-grad-hr",lsEditor.colorPicker.form).css("backgroundImage","linear-gradient(90deg, "+e.join()+")");let t=lsEditor.colorPicker.getBackgroundImage(e);$(lsEditor.colorPicker.previewSelector).css({backgroundImage:t,backgroundColor:""}),lsEditor.colorPicker.updateColorInput(t)},updateColor:function(){var e=lsEditor.colorPicker.swatch.style.opacity<1,t=lsEditor.colorPicker.$color.minicolors(e?"rgbaString":"value");lsEditor.colorPicker.form.type.value?lsEditor.colorPicker.selected.style.color=t:lsEditor.colorPicker.color=t,lsEditor.colorPicker.$color.val(t),lsEditor.colorPicker.$color.data("minicolors-settings").format=e?"rgb":"hex",lsEditor.colorPicker.$opacity.css("backgroundColor",lsEditor.colorPicker.$color.minicolors("rgbString")),lsEditor.colorPicker.updateGradient()},updateTrash:function(){lsEditor.colorPicker.form.type.value&&lsEditor.colorPicker.$slider.children().length>2?lsEditor.colorPicker.$trash.removeAttr("disabled"):lsEditor.colorPicker.$trash.attr("disabled",!0)},changeType:function(e){void 0===e||(lsEditor.colorPicker.form.type.value=e),lsEditor.colorPicker.form.className=lsEditor.colorPicker.form.className.replace(/ ?grad-type--\w+/,""),lsEditor.colorPicker.$form.addClass(lsEditor.colorPicker.getTypeClass()),lsEditor.colorPicker.form.type.value?lsEditor.colorPicker.selectSwatch():lsEditor.colorPicker.$color.minicolors("value",lsEditor.colorPicker.color2hexObject(lsEditor.colorPicker.color))},onChangeType:function(){lsEditor.colorPicker.changeType(),lsEditor.colorPicker.updateTrash(),lsEditor.colorPicker.updateGradient()},onAddSwatch:function(e){var t=lsEditor.colorPicker.createSwatch({stop:(e.pageX-lsEditor.colorPicker.$bg.offset().left)/lsEditor.colorPicker.$bg.width()*100});lsEditor.colorPicker.selectSwatch(t),lsEditor.colorPicker.updateTrash(),lsEditor.colorPicker.updateGradient()},onSelectSwatch:function(e){lsEditor.colorPicker.selected!==e.currentTarget&&lsEditor.colorPicker.selectSwatch(e.currentTarget)},onDragSwatch:function(e,t){t.helper.siblings().length>1&&(e.pageY-t.offset.top>lsEditor.colorPicker.deleteThreshold?t.helper.attr("hidden",!0):t.helper.removeAttr("hidden")),lsEditor.colorPicker.updateGradient()},onDragStopSwatch:function(e){e.currentTarget.hidden&&lsEditor.colorPicker.destroySwatch(e.currentTarget)},onDeleteSwatch:function(){lsEditor.colorPicker.destroySwatch(lsEditor.colorPicker.selected)},onAddSample:function(){var e=lsEditor.colorPicker.$color.minicolors("value");lsEditor.colorPicker.samples.indexOf(e)<0&&(lsEditor.colorPicker.createSample(e),lsEditor.colorPicker.samples.unshift(e),lsEditor.localStorage.update("samples",lsEditor.colorPicker.samples,"colorPicker"))},onApplySample:function(e){lsEditor.colorPicker.$color.minicolors("value",lsEditor.colorPicker.color2hexObject(e.currentTarget.style.backgroundColor)),setTimeout(function(){lsEditor.colorPicker.updateGradient()}.bind(lsEditor.colorPicker),1)},onDragStartSample:function(){lsEditor.colorPicker.$sampleTrash.addClass("lse-grad-active").sortable("refreshPositions")},onDragStopSample:function(){lsEditor.colorPicker.$sampleTrash.removeClass("lse-grad-active"),lsEditor.colorPicker.samples=lsEditor.colorPicker.$samples.find("[data-color]").map((function(){return $(this).data("color")})).get(),lsEditor.localStorage.update("samples",lsEditor.colorPicker.samples,"colorPicker"),lsEditor.colorPicker.$sampleTrash.children().remove()}},contextMenu:{nameSpace:"contectMenu",init:function(){$("body").on("contextmenu",".lse-has-contextmenu",(function(e){e.target;let t=$(this);$(e.target).is("input, select, textarea")||lsEditor.contextMenu.open(e,{$opener:t,width:t.data("contextmenu-width")||"auto",selector:t.data("contextmenu-selector"),template:t.data("contextmenu-template")||!1})})),$("body").on("click",".lse-has-left-contextmenu",(function(e){let t=$(this),s=t.offset(),l=t.outerWidth(),o=t.outerHeight();e.pageX=s.left-3,e.pageY=s.top+o+7,e.manualOpen=!0,e.alignRight={pageX:s.left+l},lsEditor.contextMenu.open(e,{$opener:t.closest(".lse-has-contextmenu").length?t.closest(".lse-has-contextmenu"):t,$openerButton:t,width:t.data("contextmenu-width")||"auto",selector:t.data("contextmenu-selector"),template:t.data("contextmenu-template")||!1})}))},createEvents:function(){$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.contextMenu.nameSpace,".lse-expand-section-tabs",(function(){$($(this).closest(".lse-context-menu").data("target")).closest("lse-sidebar-section").find(".lse-can-be-closed").addClass("lse-active")})),$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.contextMenu.nameSpace,".lse-collapse-section-tabs",(function(){$($(this).closest(".lse-context-menu").data("target")).closest("lse-sidebar-section").find(".lse-can-be-closed").removeClass("lse-active")})),$("body").on("mouseleave."+lsEditor.settings.nameSpace+lsEditor.contextMenu.nameSpace,".lse-stop-click-prop",(function(e){lsEditor.timeouts.leaveContextMenu=window.setTimeout((()=>{$(this).closest(".lse-context-menu").length&&lsEditor.contextMenu.close()}),lsEditor.settings.autoHideContextMenuTimer)})),$("body").on("mouseenter."+lsEditor.settings.nameSpace+lsEditor.contextMenu.nameSpace,".lse-stop-click-prop",(function(e){lsEditor.timeouts.leaveContextMenu&&window.clearTimeout(lsEditor.timeouts.leaveContextMenu)}))},open:function(e,t){t=t||{},this.options[t.selector]&&(t=$.extend({},t,this.options[t.selector])),e.preventDefault(),e.stopPropagation();var s=e.pageY;ml=e.pageX;var l=$(t.selector).removeClass("lse-context-menu-hidden"),o=$(".lse-context-menu-opened");o.length&&!o.is(l)&&lsEditor.contextMenu.close(o),l.length||(l=$($(t.template).text()).prependTo("body")),l.prependTo("body").addClass("lse-context-menu").data("contextMenuProperties",t),t.width&&l.css("width",t.width);var i=l.width(),r=lsEditor.windowWidth;if(r-(ml+i)>0?(l.removeClass("lse-context-left-subs"),l.css({top:s,left:ml+3,right:"auto"})):(e.alignRight&&(s=e.alignRight.pageY||s,ml=e.alignRight.pageX||ml),l.addClass("lse-context-left-subs"),l.css({top:s,left:"auto",right:r-ml})),t.onBeforeOpen&&!1===t.onBeforeOpen(l,t,e))return!1;l.data("target",e.target),l.addClass("lse-context-menu-opened"),t.onOpen&&t.onOpen(l),t.$openerButton&&t.$openerButton.addClass("lse-db"),setTimeout((function(){$("body").off("click.lseContextMenuClose").on("click.lseContextMenuClose",(function(){lsEditor.contextMenu.close()}))}),e.manualOpen?100:0)},close:function(e){(e=e||$(".lse-context-menu-opened")).each((function(){let t=$(this),s=e.data("contextMenuProperties");s.onClose&&s.onClose(),t.removeClass("lse-context-menu-opened").addClass("lse-context-menu-hidden").css({left:"unset",right:"unset",top:"unset",bottom:"unset"}),s.$openerButton&&s.$openerButton.removeClass("lse-db")})),$("body").off("click.lseContextMenuClose")},options:{"#lse-context-menu-sidebars":{onBeforeOpen:function(e,t,s){$(s.target).closest("lse-sidebar-section").length?e.addClass("lse-show-section-tabs-options"):e.removeClass("lse-show-section-tabs-options")}},"#lse-context-menu-image-input":{onBeforeOpen:function(e,t,s){let l=t.$opener,o=l.find("lse-image-input").css("background-image");e.find("lse-button,lse-separator").show(),o&&-1==o.indexOf("blank.gif")||e.find(".lse-remove-image,.lse-pixie-editor,lse-separator").hide(),l.find("lse-image-input").is(".lse-media-image, .lse-global-background, .lse-slider-preview")&&e.find(".lse-post-image").hide()}},"#lse-context-menu-slide-settings":{width:200,onBeforeOpen:function(e,t,s){let l=t.$opener.closest(".lse-slide-tab"),o=l.find(".lse-slide-actions"),i=l.index();e.find("lse-button").show(),l.hasClass("lse-skip")?e.find('lse-button[data-action="hide"]').hide():e.find('lse-button[data-action="unhide"]').hide(),e.off().on("click","lse-button[data-action]",(function(e){switch(jQuery(this).data("action")){case"duplicate":LayerSlider.duplicateSlide(o);break;case"hide":case"unhide":LayerSlider.toggleSlideVisibility(o);break;case"remove":LayerSlider.removeSlide(o);break;case"capture":LayerSlider.selectSlide(i),LayerSlider.captureSlide()}}))}},"#lse-context-menu-preview":{onBeforeOpen:function(e,t,s){if(lsEditor.preview.state)return!1;var l=[],o=s.pageY;ml=s.pageX,LS_contextMenuTop=s.pageY-LS_previewArea.offset().top,LS_contextMenuLeft=s.pageX-LS_previewArea.offset().left,LS_previewArea.children(".ls-l").each((function(e){var t=jQuery(this),s=LS_activeSlideData.sublayers[t.index()],i=LS_previewArea.offset().top+t.position().top,r=LS_previewArea.offset().left+t.position().left,a=t.outerWidth()*LS_previewZoom,n=t.outerHeight()*LS_previewZoom;o>i&&o<i+n&&ml>r&&ml<r+a&&l.push({index:e,data:s})})),e.find(".lse-context-overlapping-layers lse-submenu").empty(),e.find(" > * > *").show(),e[LS_activeLayerIndexSet.length>1?"addClass":"removeClass"]("lse-context-menu-multiple-selection"),l.length>1?jQuery.each(l,(function(t,s){var l=s.index,o=s.data,i=jQuery('<lse-button><lse-b class="lse-layer-thumb-wrapper"><lse-b class="lse-layer-thumb lse-it-fix"></lse-b></lse-b><lse-text>'+o.subtitle+"</lse-text></lse-button>").appendTo(e.find(".lse-context-overlapping-layers lse-submenu"));i.data("layerIndex",l),LayerSlider.setLayerMedia(o.media,jQuery(".lse-layer-thumb",i),o)})):e.find(".lse-context-overlapping-layers").hide(),LS_activeSlideData.sublayers.length||e.find(" > * > *").not(":first-child, .lse-context-menu-paste-layer").hide()}}}},dropZone:{target:null,createEvents:function(){var e=this;$(document).on("dragenter."+lsEditor.settings.nameSpace,"body",(function(t){t.preventDefault(),t.stopPropagation(),lsEditor.preview.state||e.show(t)})).on("dragleave."+lsEditor.settings.nameSpace,"body",(function(t){t.preventDefault(),t.stopPropagation(),t.target==e.target&&e.hide()})),$("lse-dropzone").on("dragenter."+lsEditor.settings.nameSpace,(function(e){e.preventDefault(),$("body").addClass("lse-dropzone-hovered")})).on("dragleave."+lsEditor.settings.nameSpace,(function(e){e.preventDefault(),$("body").removeClass("lse-dropzone-hovered")})).on("dragover."+lsEditor.settings.nameSpace,(function(e){e.preventDefault()})).on("drop."+lsEditor.settings.nameSpace,(function(e){e.preventDefault(),$("body").addClass("lse-dropzone-processing"),LayerSlider.handleDroppedImages(e)}))},show:function(e){var t=this;e.originalEvent.dataTransfer.dropEffect="copy",this.target=e.target,$("body").addClass("lse-show-dropzone"),setTimeout((function(){$lsEdo.on("mousemove.dropZoneAutoClose",(function(e){$("body").hasClass("lse-dropzone-processing")||t.hide()}))}),100)},hide:function(){$("body").removeClass("lse-show-dropzone lse-dropzone-processing"),$lsEdo.off("mousemove.dropZoneAutoClose"),this.target=null}},navigation:{createEvents:function(){$("#lse-toolbar-sidebar-tabs lse-button").on("click."+lsEditor.settings.nameSpace,(function(){$(this).is("#lse-show-navigation-settings")?lsEditor.navigation.enter():lsEditor.navigation.exit()}))},enter:function(){LayerSlider.hidePreviewSelection()},exit:function(){lsEditor.preview.state||LayerSlider.showPreviewSelection()}},notify:{timeout:0,defaults:{maxWidth:500,spinner:!1,icon:"check",iconColor:"inherit",iconSize:null,text:"",timeout:0,className:""},init:function(){$("lse-notify-osd").prependTo("body")},show:function(e){e=e||{},e=$.extend(!0,{},lsEditor.notify.defaults,e);var t=$("lse-notify-osd").attr("class",""),s=t.children(".lse-icon"),l=t.children(".lse-text"),o=kmw.opened.length||LS_imageEditorOpened?"50%":lsEditor.wfWidth/2+lsEditor.wfOffset.left;e.spinner?s.show().html('<div class="lse-spinner is-active"></div>'):e.icon?s.show().html(LS_InterfaceIcons.notifications[e.icon]):s.hide(),l.html(e.text),e.iconSize,e.className&&t.addClass(e.className),t.css("left",o).addClass("lse-visible"),e.timeout&&(clearTimeout(lsEditor.notify.timeout),lsEditor.notify.timeout=setTimeout((function(){lsEditor.notify.hide()}),e.timeout))},hide:function(){$("lse-notify-osd").removeClass("lse-visible")}},form:{createEvents:function(){var e='.lse-inputs-dblclick input[type="text"]';$("body").on("focus."+lsEditor.settings.nameSpace,e,(function(){if($(this).data("editable")){var e=$(this)[0],t=e.value.length;if(e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var s=e.createTextRange();s.collapse(!0),s.moveEnd("character",t),s.moveStart("character",t),s.select()}}else this.blur()})).on("dblclick."+lsEditor.settings.nameSpace,e,(function(){$(this).data("editable",!0),this.focus()})).on("blur."+lsEditor.settings.nameSpace,e,(function(){$(this).data("editable",!1)})),$("body").on("click."+lsEditor.settings.nameSpace,'.lse-form-elements input[type="text"], .lse-form-elements input[type="number"]',(function(){$(this).select()})),$("body").on("focus."+lsEditor.settings.nameSpace,'.lse-range-inputs input[type="range"]',(function(){$(this).siblings("input[type=text], input[type=number], input[type=hidden]").trigger("track.lse-undomanager"),$(this).siblings("lse-fe-wrapper.lse-smart-help").find("input[type=text], input[type=number], input[type=hidden]").trigger("track.lse-undomanager")})),$("body").on("input."+lsEditor.settings.nameSpace,'.lse-range-inputs input[type="range"]',(function(){$(this).siblings("input[type=text], input[type=number], input[type=hidden]").val($(this).val()).trigger("input"),$(this).siblings("lse-fe-wrapper.lse-smart-help").find("input[type=text], input[type=number], input[type=hidden]").val($(this).val()).trigger("input")})),$("body").on("change."+lsEditor.settings.nameSpace,'.lse-range-inputs input[type="range"]',(function(){$(this).siblings("input[type=text], input[type=number], input[type=hidden]").trigger("change"),$(this).siblings("lse-fe-wrapper.lse-smart-help").find("input[type=text], input[type=number], input[type=hidden]").trigger("change")})),$("body").on("input."+lsEditor.settings.nameSpace+"updateRange wheel."+lsEditor.settings.nameSpace+"updateRange mousewheel."+lsEditor.settings.nameSpace+"updateRange",'.lse-range-inputs input:not([type="range"])',(function(){$(this).siblings("input[type=range]").val($(this).val()),$(this).closest(".lse-range-inputs").find("input[type=range]").val($(this).val())})),$("body").on("focusout."+lsEditor.settings.nameSpace,'input[type="number"]',(function(){let e=$(this),t=e.val()||!1,s=e.attr("min")||!1,l=e.attr("max")||!1;s&&l&&t&&(t=parseFloat(t),s=parseFloat(s),l=parseFloat(l),t<s?e.val(s):t>l&&e.val(l))})),$("body").on("click."+lsEditor.settings.nameSpace,"[data-link-property]",(function(e){let t=$(this),s=t.attr("data-link-property"),l=$('input[data-link="'+s+'"]');t.hasClass("lse-active")?(l.data("lse-undomanager-exclude",1),l.on("focus.link"+s,(function(e){$(this).attr("name")&&l.each((function(){$(this).data("prevVal",$(this).val())}))})),l.on("input.link"+s,(function(e){e.originalEvent&&(l.val($(this).val()),$(this).attr("name")&&(LS_DataSource.setLayerDataFromInputs(l),LayerSlider.generateSelectedPreviewItems()))})),l.on("change.link"+s,(function(e){$(this).attr("name")&&LS_DataSource.setLayerUndoManagerFromInputs(l)}))):(l.data("lse-undomanager-exclude",0),l.off("input.link"+s+" focus.link"+s+" change.link"+s))})),$("[data-link-property]").each((function(){let e=$(this);e.hasClass("lse-set-active")&&!e.hasClass("lse-active")&&e.trigger("click."+lsEditor.settings.nameSpace)})),$("body").on("focusin."+lsEditor.settings.nameSpace,'.lse-form-elements input[type="number"]',(function(){var e=$(this).closest(".lse-scrollbar");$(this).on("wheel."+lsEditor.settings.nameSpace+" mousewheel."+lsEditor.settings.nameSpace,'.lse-form-elements input[type="number"]',(function(t){e.scrollTop(e.scrollTop())}))})),$("body").on("focusout."+lsEditor.settings.nameSpace,'.lse-form-elements input[type="number"]',(function(){$(this).off("wheel."+lsEditor.settings.nameSpace+" mousewheel."+lsEditor.settings.nameSpace)})),$("body").on("click."+lsEditor.settings.nameSpace,"lse-button[data-set]",(function(){let e=$(this),t=$([]);data=e.data("set");for(let e in data){let s=$('[data-get="'+e+'"]');t=t.add(s),s.data("prevVal",s.val()).val(data[e])}LS_DataSource.setLayerDataFromInputs(t),LS_DataSource.setLayerUndoManagerFromInputs(t),LayerSlider.generateSelectedPreviewItems()})),$("#lse-pos-to-percent").on("click."+lsEditor.settings.nameSpace,(function(){let e=lsEditor.workspace.getSize(),t=$('[data-get="style-left"]'),s=$('[data-get="style-top"]'),l=[];$("lse-preview-area .ui-selected").each((function(){let o=$(this),i=o.index(),r=o.position(),a=LS_activeSlideData.sublayers[i],n=a.styles.left||0,d=a.styles.top||0,c=o.outerWidth(),p=o.outerHeight(),u={},m={};if(o.data("beforeConvertPositions",{left:r.left+"px",top:r.top+"px"}),-1===n.indexOf("%")){let s=parseFloat(n)+c/2,l=Math.round(s/(e.width/100)*100)/100+"%";u.left=a.styles.left,m.left=l,a.styles.left=l,1===LS_activeLayerDataSet.length&&t.val(l)}if(-1===d.indexOf("%")){let t=parseFloat(d)+p/2,l=Math.round(t/(e.height/100)*100)/100+"%";u.top=a.styles.top,m.top=l,a.styles.top=l,1===LS_activeLayerDataSet.length&&s.val(l)}$.isEmptyObject(u)||l.push({itemIndex:i,undo:u,redo:m})})),$.isEmptyObject(l)||(LS_UndoManager.add("layer.style","LAYER_POSITION",l),LayerSlider.generateSelectedPreviewItems())})),$("#lse-pos-to-pixels").on("click."+lsEditor.settings.nameSpace,(function(){let e=$('[data-get="style-left"]'),t=$('[data-get="style-top"]'),s=[];$("lse-preview-area .ui-selected").each((function(){let l=$(this),o=l.index(),i=LS_activeSlideData.sublayers[o],r=i.styles.left,a=i.styles.top,n={left:parseFloat(l[0].style.left),top:parseFloat(l[0].style.top)},d={},c={};if(-1!==r.indexOf("%")){let t=Math.round(n.left)+"px";d.left=i.styles.left,c.left=t,i.styles.left=t,1===LS_activeLayerDataSet.length&&e.val(t)}if(-1!==a.indexOf("%")){let e=Math.round(n.top)+"px";d.top=i.styles.top,c.top=e,i.styles.top=e,1===LS_activeLayerDataSet.length&&t.val(e)}$.isEmptyObject(d)||s.push({itemIndex:o,undo:d,redo:c})})),$.isEmptyObject(s)||(LS_UndoManager.add("layer.style","LAYER_POSITION",s),LayerSlider.generateSelectedPreviewItems())})),$(".lse-pos-to-center").on("click."+lsEditor.settings.nameSpace,(function(){let e=$('[data-get="style-left"]'),t=$('[data-get="style-top"]'),s=[],l=$(this);$("lse-preview-area .ui-selected").each((function(){let o=$(this).index(),i=LS_activeSlideData.sublayers[o],r=(i.styles.left,i.styles.top,{}),a={}
;if(l.is(".lse-center-h")){let t="50%";r.left=i.styles.left,a.left=t,i.styles.left=t,1===LS_activeLayerDataSet.length&&e.val(t)}if(l.is(".lse-center-v")){let e="50%";r.top=i.styles.top,a.top=e,i.styles.top=e,1===LS_activeLayerDataSet.length&&t.val(e)}$.isEmptyObject(r)||s.push({itemIndex:o,undo:r,redo:a})})),$.isEmptyObject(s)||(LS_UndoManager.add("layer.style","LAYER_POSITION",s),LayerSlider.generateSelectedPreviewItems())})),$(".lse-clear-property").on("click."+lsEditor.settings.nameSpace,(function(){let e=$(this).closest("lse-sidebar-section-body"),t=e.find(":input"),s=e.find(":input:hidden");t.each((function(){let e=$(this);e.data("default")&&e.val(e.data("default"))})),s.trigger("track.lse-undomanager").val("").trigger("input").trigger("change")})),$("body").on("click."+lsEditor.settings.nameSpace,".lse-toggle-all lse-button, .lse-min-one lse-button, .lse-max-one lse-button",(function(){let e=$(this).parent(),t=$(this);e.hasClass("lse-toggle-all")&&t.toggleClass("lse-active"),e.hasClass("lse-max-one")&&t.siblings().removeClass("lse-active"),e.hasClass("lse-min-one")&&!e.find(".lse-active").length&&t.addClass("lse-active")})),$("body").on("click."+lsEditor.settings.nameSpace,"[data-style] lse-button, lse-button[data-style]",(function(){let e=$(this).closest("lse-button-group"),t=$(this),s=e.hasClass("lse-max-one"),l=s?e.find(".lse-active"):$(),o=s?e.attr("data-style"):t.attr("data-style"),i=$("#lse-text-sample");if(s)l.length?i.css(o,l.attr("data-value")):i.css(o,e.attr("data-value")||"");else{let e="";t.hasClass("lse-active")?(e=t.attr("data-value"),i.css(o,e)):(e=t.attr("data-default-value")||e,i.css(o,"")),$('input[data-style="'+o+'"]').trigger("track.lse-undomanager").val(e).filter('[name!=""]').trigger("input").trigger("change")}})),$("body").on("input."+lsEditor.settings.nameSpace,"input[data-style]",(function(){let e=$(this),t=e.attr("data-style"),s=e.val(),l=e.attr("data-unit")||"";s=l?s+l:s,$("#lse-text-sample").css(e.attr("data-style"),s),$('[data-style="'+t+'"]').each((function(){let t=$(this);t.attr("data-value")==e.val()?t.addClass("lse-active"):t.removeClass("lse-active")}))})),$("body").on("click."+lsEditor.settings.nameSpace,"lse-button-group[data-set-hidden-input-to] lse-button, lse-fe-wrapper[data-set-hidden-input-to] lse-button",(function(){let e=$(this),t=e.siblings('input[type="hidden"]'),s=e.closest("[data-set-hidden-input-to]"),l=s.attr("data-defalut-value")||"",o=s.attr("data-set-hidden-input-to"),i=e.hasClass("lse-active")?e.attr("data-"+o):l;t.trigger("track.lse-undomanager").val(i).trigger("input").trigger("change")})),$("body").on("input."+lsEditor.settings.nameSpace,'lse-button-group[data-set-hidden-input-to] input[type="hidden"], lse-fe-wrapper[data-set-hidden-input-to] input[type="hidden"]',(function(){let e=$(this),t=e.closest("[data-set-hidden-input-to]"),s=t.attr("data-set-hidden-input-to"),l=t.find("[data-"+s+"]"),o=t.find("[data-"+s+'="'+e.val().trim()+'"]');l.removeClass("lse-active"),o.addClass("lse-active"),t.is(".lse-alignment")||$("#lse-text-sample").css(t.attr("data-style"),e.val())})),$("body").on("click."+lsEditor.settings.nameSpace,"lse-button[data-set-hidden-input-to]",(function(){let e=$(this),t=e.find('input[type="hidden"]'),s=e.attr("data-set-hidden-input-to"),l=e.attr("data-"+s),o=e.attr("data-default-"+s);t.trigger("track.lse-undomanager").val(e.hasClass("lse-active")?l:o).trigger("input").trigger("change")})),$("body").on("input."+lsEditor.settings.nameSpace,'lse-button[data-set-hidden-input-to] input[type="hidden"]',(function(){let e=$(this),t=e.closest("lse-button"),s=t.attr("data-set-hidden-input-to"),l=t.attr("data-"+s);e.val().trim()==l?t.addClass("lse-active"):t.removeClass("lse-active"),$("#lse-text-sample").css(t.attr("data-style"),e.val())})),$("body").on("focusin."+lsEditor.settings.nameSpace+" focusout."+lsEditor.settings.nameSpace,"[data-get-prop-name] input",(function(e){let t=$(this),s=t.closest("td"),l=s.find("input").index(t),o=s.attr("data-get-prop-name"),i=$('[data-set-prop-name="'+o+'"]'),r="lse-active lse-fw-600";"focusout"==e.type&&i.children().removeClass(r),"focusin"==e.type&&i.find("lse-i").eq(l).addClass(r)})),$("body").on("click."+lsEditor.settings.nameSpace+" input."+lsEditor.settings.nameSpace,"[data-cv]",(function(e){let t=$(this),s=t.attr("data-cv");$input=$('input[type="hidden"][data-sv="'+s+'"]'),values=[],value="","click"===e.type&&!t.is("lse-button-group")||"input"===e.type&&!t.is('input:not([type="range"])')||($('[data-cv="'+s+'"]').each((function(){let e=$(this),t=e.attr("data-cv-unit")||"",l="",o=parseFloat(e.attr("data-cv-id"))-1;e.is("lse-button-group")?l=e.find(".lse-active").attr("data-cv-value"):e.is('input:not([type="range"])')&&(l=e.val()+t),-1===s.indexOf("border-radius")&&-1===s.indexOf("border-width")||($.isNumeric(l)?l+="px":l.length||(l="0")),values[o]=l})),value=values.join(" ").trim(),"0 0 0 0"===value&&(value=""),$input.trigger("track.lse-undomanager").val(value).trigger("input.lse-update-data").trigger("change"))})),$("body").on("input."+lsEditor.settings.nameSpace,'input[type="hidden"][data-sv]',(function(e){let t=$(this),s=t.attr("data-sv"),l=t.val().trim().split(/ (?![^(]*\))/),o=1,i=function(e){return-1!==e.indexOf("px")&&(e=parseInt(e)),e};if("box-shadow"===s)"inset"!==l[0]&&(o=2);if($('[data-cv="'+s+'"]').each((function(){let e=$(this),t=parseFloat(e.attr("data-cv-id"))-o;if(-1!==s.indexOf("border-radius")||-1!==s.indexOf("border-width")){let s;switch(l.length){case 1:e.val(i(l[0]));break;case 2:switch(t){case 0:case 2:s=l[0];break;case 1:case 3:s=l[1]}e.val(i(s));break;case 3:case 4:s=l[t]||"",e.val(i(s))}}else if(e.is("lse-button-group"))e.find(".lse-active").removeClass("lse-active"),e.find('[data-cv-value="'+l[t]+'"]').addClass("lse-active"),e.find(".lse-active").length||e.find('[data-cv-value=""]').addClass("lse-active");else if(e.is('.lse-color-input input[type="text"]'))e.val(l[t]),LS_GUI.updateColorPicker(e);else if(e.is('input:not([type="range"]):not([type="hidden"])')){let s=l[t]||0;e.is('[type="number"]')&&(s=parseInt(s)),e.val(s).trigger("input."+lsEditor.settings.nameSpace+"updateRange")}})),-1!==s.indexOf("border-radius")||-1!==s.indexOf("border-width")){let e=t.closest("lse-col").find("ls-icon.ls-icon-link"),s=!1;(1==l.length||2==l.length&&l[0]==l[1]||4==l.length&&l.every(((e,t,s)=>e===s[0])))&&(s=!0),(s&&!e.hasClass("lse-active")||!s&&e.hasClass("lse-active"))&&e.trigger("click")}})),$lsEwf.on("mouseup."+lsEditor.settings.nameSpace,(function(){$(":focus").blur()}))},highlightItem:function(e){let t;t=e.closest("lse-col").length?e.closest("lse-col").is(".lse-wide, .lse-full")?e.closest("lse-ib"):e.closest("lse-col"):e.closest("lse-sidebar-section-body")?e.closest("lse-sidebar-section-body"):e,t.addClass("lse-highlight-item"),setTimeout((function(){t.removeClass("lse-highlight-item")}),1e3)},selectCategory:function(e,t,s){if(e.is("lse-sidebar-body")){let l=e.parent().find("lse-sidebar-body").index(e);if(e.closest(".lse-sidebar").find("lse-sidebar-subnav").find("lse-subnav-item:not(.lse-no-toggle)").eq(l).click(),s){let e=s.index();$("#lse-transition-dropdown").click().children().eq(e).click()}let o=t.closest("lse-sidebar-section-body").prev("lse-sidebar-section-head");o.length&&(o.hasClass("lse-active")||o.click(),o.closest("lse-sidebar-section").scrollTop(0),o.closest("lse-sidebar-section").scrollTop(o.position().top))}}},formRows:{nameSpace:"formRows",init:function(){$(".lse-form-rows:not(.lse-initialized)").each((function(){let e=$(this);lsEditor.formRows.add(e),e.addClass("lse-initialized")}))},createEvents:function(){$("body").on("input."+lsEditor.settings.nameSpace+lsEditor.formRows.nameSpace,'.lse-form-row input:not([type="hidden"]):not([type="checkbox"]), .lse-form-row select',(function(){let e=$(this),t=e.closest(".lse-form-row"),s=t.find('input:not([type="hidden"]):not([type="checkbox"]), select'),l=t.closest(".lse-form-rows"),o=t.find('.lse-show-only-if-other-has-value input:not([type="hidden"]):not([type="checkbox"])');hasValue=!1,unit=e.find(":selected").attr("data-unit")||e.attr("data-unit")||"",!e.next("lse-unit").length&&e.attr("data-auto-unit")&&t.find("lse-unit").text(unit),s.each((function(){""!==$(this).val().trim()&&(hasValue=!0)})),t[(hasValue?"add":"remove")+"Class"]("lse-has-value"),o.length&&o.focus(),lsEditor.formRows.check(l)})),$("body").on("mouseenter."+lsEditor.settings.nameSpace+lsEditor.formRows.nameSpace+" mouseover."+lsEditor.settings.nameSpace+lsEditor.formRows.nameSpace,".lse-form-row.lse-has-value",(function(){let e=$(this),t=e.closest(".lse-form-rows"),s=t.find(".lse-form-row"),l=t.find(".lse-form-rows-close");e.is(s.last())||l.appendTo(e)})),$("body").on("mouseleave."+lsEditor.settings.nameSpace+lsEditor.formRows.nameSpace,".lse-form-row.lse-has-value",(function(){let e=$(this).closest(".lse-form-rows");e.find(".lse-form-rows-close").prependTo(e)})),$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.formRows.nameSpace,".lse-form-rows-close",(function(e){e.stopPropagation(),lsEditor.formRows.remove($(this).closest(".lse-form-row"))}))},check:function(e){let t,s,l=e.find(".lse-form-row");l.length>1&&l.each((function(l){s=$(this),t=e.find(".lse-form-row"),s.hasClass("lse-has-value")||s.is(t.last())||lsEditor.formRows.remove(s)})),e.find(".lse-form-row").last().hasClass("lse-has-value")&&lsEditor.formRows.add(e)},add:function(e,t){let s=e.find(".lse-placeholder"),l=e.find(".lse-form-row").last();t?s.clone().removeClass("lse-placeholder").addClass("lse-form-row lse-has-value").insertBefore(l):s.clone().removeClass("lse-placeholder").addClass("lse-form-row").insertAfter(l.length?l:s)},remove:function(e){e.closest(".lse-form-rows").find(".lse-form-rows-close").prependTo(e.closest(".lse-form-rows")),e.remove()}},gui:{createEvents:function(){$("#lse-show-slides-list").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.slidesList.toggle()})),$("#lse-toolbar-sidebar-tabs lse-button:not(.lse-no-toggle), lse-sidebar-subnav lse-subnav-item:not(.lse-no-toggle), .lse-layers-list lse-li:not(.lse-no-toggle), .lse-children-can-be-selected > *:not(.lse-no-toggle, .lse-locked)").on("click."+lsEditor.settings.nameSpace,(function(){$(this).siblings().removeClass("lse-active"),$(this).addClass("lse-active")})),$(".lse-changed-by-submenu").next("lse-submenu").find("lse-button, .lse-button").on("click."+lsEditor.settings.nameSpace,(function(){var e=$(this),t=e.index(),s=e.closest("lse-submenu-wrapper").find(".lse-changed-by-submenu");s.find("ls-icon").removeClass("lse-active"),s.find("ls-icon").eq(t).addClass("lse-active"),e.siblings().removeClass("lse-active"),e.addClass("lse-active")})),$("[data-editor-class]").on("click."+lsEditor.settings.nameSpace,(function(){let e=$(this);e.siblings().each((function(){$lsE.removeClass($(this).attr("data-editor-class"))})),$lsE.addClass(e.attr("data-editor-class"))})),$("body").on("click."+lsEditor.settings.nameSpace,".lse-can-be-activated",(function(){$(this).toggleClass("lse-active")})),$("body").on("click."+lsEditor.settings.nameSpace,".lse-show-on-click",(function(e){let t=$(this),s=t.find("lse-button, .lse-button").first();t.toggleClass("lse-visible"),s.toggleClass("lse-active"),t.hasClass("lse-visible")&&t.find("lse-slide-menu.lse-reset-on-close").length&&lsEditor.slideMenu.reset(t.find("lse-slide-menu"))})),$(".lse-can-be-closed").on("click."+lsEditor.settings.nameSpace,(function(){let e=$(this);e.is("lse-sidebar-section-head")&&lsEditor.workspace.settings.autoCloseSectionTabs&&e.siblings("lse-sidebar-section-head").removeClass("lse-active"),e.toggleClass("lse-active")})),$("body").on("click."+lsEditor.settings.nameSpace,".lse-stop-click-prop",(function(e){e.stopPropagation()})),$("body").on("click."+lsEditor.settings.nameSpace,"[data-callback]",(function(e){let t=$(this),s=t.attr("data-callback");s&&((t.hasClass("lse-visible")||t.hasClass("lse-active"))&&lsEditor.gui.openCallbacks[s]?lsEditor.gui.openCallbacks[s]():t.hasClass("lse-visible")||t.hasClass("lse-active")||!lsEditor.gui.closeCallbacks[s]||lsEditor.gui.closeCallbacks[s]())}))},open:function(e){let t=lsEditor.cache.getItem(e);!t.length||t.hasClass("lse-active")||t.hasClass("lse-visible")||t.click()},openCallbacks:{ellipsis:function(){if($("lse-editor").hasClass("lse-menu-more-badge")){LS_draftNoticeOpened++;var e=parseInt(localStorage["lse-menu-more-displayed"])||0;localStorage["lse-menu-more-displayed"]=++e}}},close:function(e){let t=lsEditor.cache.getItem(e);t.length&&(t.hasClass("lse-active")||t.hasClass("lse-visible"))&&t.click()},closeCallbacks:{ellipsis:function(){$("lse-editor").hasClass("lse-menu-more-badge")&&$("lse-editor").removeClass("lse-menu-more-badge")}}},layers:{createEvents:function(){$("body").on("mouseleave."+lsEditor.settings.nameSpace+lsEditor.layersList.nameSpace+" click."+lsEditor.settings.nameSpace+lsEditor.layersList.nameSpace,"#lse-layers-list lse-li, lse-preview-area .ls-l",(function(){lsEditor.preview.state||lsEditor.layers.highlight.hide()})),$("body").on("mouseenter."+lsEditor.settings.nameSpace,"#lse-layers-list lse-li:not(.lse-active), lse-preview-area .ls-l:not(.ui-selected)",(function(){lsEditor.preview.state||LS_tourIsActive||lsEditor.layers.highlight.show($(this).index())})),$("body").on("mousedown."+lsEditor.settings.nameSpace,"lse-preview-area .ls-l",(function(){lsEditor.preview.state||lsEditor.layers.highlight.hide()})),$("#lse-rotate-selected").on("mousedown.rotateSelected",(function(e){e.stopPropagation(),lsEditor.layers.rotateSelected.start(e),$("body").on("mousemove.rotateSelected",(function(e){lsEditor.layers.rotateSelected.rotate(e)}))})),$("#lse-rotate-selected").on("mouseup.rotateSelected",(function(){$("body").off("mousemove.rotateSelected"),lsEditor.layers.rotateSelected.end()})),$("#lse-rotate-selected").on("mouseenter.rotateSelected",(function(){lsEditor.layers.rotateSelected.mouseEnter()})),$("#lse-rotate-selected").on("mouseleave.rotateSelected",(function(){lsEditor.layers.rotateSelected.mouseLeave()})),$("#lse-set-layer-type lse-smart-dropdown-inner lse-li").on("click",(function(){lsEditor.layers.changeType($(this).attr("data-name"))})),$("#lse-post-placeholders lse-button").on("click",(function(){let e=$("#lse-layer-content"),t=e.text();e.text(t+$(this).text())})),$("body").on("change."+lsEditor.settings.nameSpace,".lse-select-layer-action",(function(){let e=$(this),t=e.closest("lse-row");lsEditor.layers.actions.set(e.val(),t)}))},autoSelect:!0,setAutoSelect:function(e,t,s){$lsE["true"==e?"addClass":"removeClass"]("lse-autoselect-layers"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action")},setHighlight:function(e,t,s){$lsE["true"==e?"addClass":"removeClass"]("lse-highlight-layers"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action")},setSnapping:function(e,t,s){"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action")},setType:function(e){e=e||LS_activeLayerDataSet[0].media,$("lse-layer-settings").attr("data-layer-type",e),lsEditor.smartDropdown.updateValue("#lse-set-layer-type",e)},changeType:function(e){this.setType(e);let t=LS_activeLayerIndexSet[0],s=LS_activeLayerDataSet[0];LS_UndoManager.add("layer.general","LAYER_TYPE",{itemIndex:t,undo:{media:s.media},redo:{media:e}}),s.media=e,LayerSlider.generateSelectedPreviewItems(),LayerSlider.autoRenameLayer(LS_activeLayerIndexSet[0])},highlight:{show:function(e){if(this.disabled)return!1;let t=e instanceof jQuery?e:$lsEpa.children().eq(e);if(t.is(".ui-selected, .lse-disabled")||!t.length)return!1;let s=t.outerWidth(),l=t.outerHeight(),o=parseFloat(t[0].style.left),i=parseFloat(t[0].style.top),r=parseInt(t.css("margin-left")),a=parseInt(t.css("margin-top")),n=t[0].style.transform,d=t[0].style.transformOrigin;$lsElh.css({left:o,top:i,marginLeft:r,marginTop:a,width:s,height:l,transform:n,transformOrigin:d,display:"block"})},hide:function(){$lsElh.css({display:"none"})},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0,this.hide()}},rotateSelected:{$el:$("#lse-rotate-selected"),text:$("#lse-rotate-selected").attr("data-text"),alternateText:$("#lse-rotate-selected").attr("data-alternate-text"),mouseEnter:function(){let e=$lsEpa.find(".ui-selected");1===e.length?(this.$el.attr("data-rotation",(LS_activeSlideData.sublayers[e.index()].transition.rotation||0)+"deg"),this.$el.attr("data-text",this.text+": ")):(this.$el.attr("data-rotation",""),this.$el.attr("data-text",this.alternateText)),lsEditor.layers.transformHelper.show(!0,!0)},mouseLeave:function(){lsEditor.layers.transformHelper.hide()},start:function(e){let t=$lsEpa.find(".ui-selected"),s=[];t.each((function(e,t){let l=LS_activeSlideData.sublayers[$(t).index()];s[e]=parseInt(l.transition.rotation||0)})),this.$el.data({mousePosStart:{left:e.pageX,top:e.pageY},originalRotations:s}),this.$el.attr("data-text",this.text+": "),t.length>1&&this.$el.attr("data-rotation","0deg")},rotate:function(e){let t=$lsEpa.find(".ui-selected"),s=this.$el.data(),l=s.originalRotations,o=s.mousePosStart.left-e.pageX,i=s.mousePosStart.top-e.pageY,r=i;if(e.shiftKey&&i%5!=0)return!1;let a=1===t.length?parseInt(LS_activeSlideData.sublayers[t.index()].transition.rotation||0):i>0?"+":"";this.$el[0].style.setProperty("--mouseleft",-o+"px"),this.$el[0].style.setProperty("--mousetop",-i+"px"),this.$el.attr("data-rotation",a+r+"deg"),t.each((function(e,t){TweenMax.set(t,{rotation:l[e]+r})})),s.rotation=r,lsEditor.layers.transformHelper.update(),$('lse-layer-settings input[name="rotation"]').val(a+r)},end:function(){let e=this.$el.data(),t=[];$lsEpa.find(".ui-selected").each((function(s,l){let o=$(l).index(),i=LS_activeSlideData.sublayers[o];t.push({itemIndex:o,undo:{rotation:i.transition.rotation},redo:{rotation:e.originalRotations[s]+e.rotation+""}}),i.transition.rotation=e.originalRotations[s]+e.rotation+""})),LS_UndoManager.add("layer.transition","LAYER_ROTATE",t),this.$el[0].style.setProperty("--mouseleft","0px"),this.$el[0].style.setProperty("--mousetop","0px")}},transformHelper:{$dummy:$("lse-hidden-wrapper#for-workspace lse-transform-helper"),$elements:$(),reset:function(){this.$elements&&this.$elements.length&&this.$elements.remove(),this.$elements=$()},set:function(e,t){this.showOrigin=e,this.showOriginRadius=t,e?(this.$elements.find("lse-transform-marker").show(),t?this.$elements.find("lse-transform-origin-marker").show():this.$elements.find("lse-transform-origin-marker").hide()):this.$elements.find("lse-transform-marker").hide()},show:function(e,t){this.reset(),$lsEpa.find(".ui-selected").each(((e,t)=>{let s=this.$dummy.clone();s.data({layerIndex:$(t).index(),$transformMarker:s.find("lse-transform-marker"),$transformOriginMarker:s.find("lse-transform-origin-marker")}).appendTo($lsEpw),this.$elements=this.$elements.add(s)})),this.set(e,t),this.update()},update:function(){this.$elements.each(((e,t)=>{let s=$(t),l=s.data(),o=LS_previewItems[l.layerIndex],i=o[0],r=parseFloat(i.style.left),a=parseFloat(i.style.top),n=o.outerWidth(),d=o.outerHeight(),c=(lsEditor.workspace.zoom.settings.value,i.style.transformOrigin),p=lsEditor.layers.transformOrigin.getPropertiesInPixels(c,r,a);if(s.css({left:r,top:a,width:n,height:d}),l.$transformMarker.css({transform:i.style.transform,transformOrigin:c}),this.showOrigin&&l.$transformOriginMarker.css({left:p[0],top:p[1]}),this.showOriginRadius){let e=lsEditor.layers.transformOrigin.getShortestRadius(p[0],p[1],r,a,n,d);l.$transformOriginMarker[0].style.setProperty("--diameter",e+"px")}}))},hide:function(){this.reset()}},transformOrigin:{getPropertiesInPixels:function(e,t,s){let l=lsEditor.workspace.zoom.settings.value,o=e.replace("sliderleft",-t+"px").replace("sliderright",lsEditor.wcWidth/l-t+"px").replace("slidercenter",lsEditor.wcWidth/2/l-t+"px").replace("slidermiddle",lsEditor.wcHeight/2/l-s+"px").replace("slidertop",-s+"px").replace("sliderbottom",lsEditor.wcHeight/l-s+"px").replace("left","0px").replace("top","0px").replace("right","100%").replace("bottom","100%").replace("center","50%").split(" ");return[o[0],o[1]]},getShortestRadius:function(e,t,s,l,o,i){e=-1!==e.indexOf("%")?o/100*parseInt(e):parseInt(e);let r=(t=-1!==t.indexOf("%")?i/100*parseInt(t):parseInt(t))>=0&&t<=i&&e>=0&&e<=o?"max":"min",a=t>=0&&t<=i?Math.abs(-e):1/0,n=t>=0&&t<=i?Math.abs(o-e):1/0,d=e>=0&&e<=o?Math.abs(-t):1/0,c=e>=0&&e<=o?Math.abs(i-t):1/0,p=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),u=Math.sqrt(Math.pow(o-e,2)+Math.pow(t,2)),m=Math.sqrt(Math.pow(e,2)+Math.pow(i-t,2)),f=Math.sqrt(Math.pow(o-e,2)+Math.pow(i-t,2));return Math.round(2*Math[r](a,n,d,c,p,u,m,f))}},actions:{set:function(e,t){let s=$("#lse-layer-actions-data"),l=$(s.find("[data-layer-action="+e+"]").clone().html()),o=t.find("lse-col-separator");t.find(".lse-focused-col").removeClass("lse-focused-col"),o.nextAll("lse-col").remove(),t.find(".lse-layer-action-desc").remove(),l.find("[data-name]").each((function(){let e=$(this);e.attr("name",e.attr("data-name")).removeAttr("data-name")})),l.insertAfter(o),t.find("lse-col:eq(1)").find('input:not([type="hidden"]), select, textarea').first().trigger("focus"),t.find("lse-col.lse-dn").removeClass("lse-dn"),t.find(".lse-layer-action-desc").insertAfter(t.find("lse-col:eq(0)")),$select=t.find(".lse-layer-action-slide-list"),$select.children().not("[data-protected]").remove(),jQuery.each(window.lsSliderData.layers,(function(e,t){let s=t.properties.title||"Unnamed";$select.append('<option value="'+(e+1)+'">'+(e+1)+" | "+s+"</option>")}))}}},layersList:{nameSpace:"layersList",position:function(e,t,s){$lsElayersList.prependTo("lse-"+e+"-frame lse-sidebar-inner"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action"),lsEditor.workspace.update(),lsEditor.workspace.zoom.checkFit()},dock:function(e,t,s){$lsE["true"==e?"addClass":"removeClass"]("lse-layers-list-docked"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action"),lsEditor.workspace.update(),lsEditor.workspace.zoom.checkFit()},pin:function(e,t,s){$lsE["true"==e?"removeClass":"addClass"]("lse-layers-list-autohide"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action"),lsEditor.workspace.update(),lsEditor.workspace.zoom.checkFit()},close:function(e,t,s){$lsE["true"==e?"addClass":"removeClass"]("lse-layers-list-closed"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action"),lsEditor.workspace.update(),lsEditor.workspace.zoom.checkFit()}},loading:{show:function(e,t){this.enabled&&this.hide(),e=e||$lsE,t=t||$lsEloading.attr("data-original-loading-text"),"modal"===e&&($lsEloading.addClass("lse-loading-in-modal"),e=$("body")),$lsEloading.attr("data-loading-text",t).appendTo(e),$lsE.addClass("lse-editor-is-loading"),this.enabled=!0},hide:function(){$lsEloading.hasClass("lse-loading-in-modal")&&($lsEloading.removeClass("lse-loading-in-modal"),$lsEloading.appendTo($lsE)),$lsE.removeClass("lse-editor-is-loading"),this.enabled=!1}},localStorage:{data:{},load:function(){this.data=JSON.parse(localStorage.getItem("lsEditor"))||{};for(let e in this.data)for(let t in this.data[e])switch(e){case"action":lsEditor.actions.do(t,this.data[e][t],"skipSave");break;case"setProperties":$(t).css(this.data[e][t])}},update:function(e,t,s="default"){this.data[s]||(this.data[s]={}),this.data[s][e]=t,localStorage.setItem("lsEditor",JSON.stringify(this.data))}},maxClicks:{nameSpace:"maxClicks",init:function(){$(".lse-max-clicks").each((function(){let e=$(this),t=e.attr("data-max-clicks-namespace"),s=parseInt(e.attr("data-max-clicks"));lsEditor.localStorage.data[lsEditor.maxClicks.nameSpace]&&lsEditor.localStorage.data[lsEditor.maxClicks.nameSpace].hasOwnProperty(t)&&lsEditor.localStorage.data[lsEditor.maxClicks.nameSpace][t]>=s&&e.addClass("lse-clicked")}))},createEvents:function(){$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.maxClicks.nameSpace,".lse-max-clicks",(function(){let e=$(this),t=(parseInt(e.attr("data-max-clicks")),e.attr("data-max-clicks-namespace")),s=lsEditor.localStorage.data[lsEditor.maxClicks.nameSpace]&&lsEditor.localStorage.data[lsEditor.maxClicks.nameSpace].hasOwnProperty(t)?lsEditor.localStorage.data[lsEditor.maxClicks.nameSpace][t]:0;e.hasClass("lse-clicked")||(e.addClass("lse-clicked"),lsEditor.localStorage.update(e.attr("data-max-clicks-namespace"),s+1,lsEditor.maxClicks.nameSpace))}))}},preview:{state:!1,inputElements:{timeline:$(".lse-toggle-timeline-view, .lse-exit-timeline-view"),project:$(".lse-toggle-project-preview, .lse-exit-project-view"),slide:$(".lse-toggle-slide-preview, .lse-exit-slide-preview"),layer:$(".lse-toggle-layer-preview, .lse-exit-layer-preview")},updateElements:function(e,t){for(let s in this.inputElements)s!=e||t?this.inputElements[s].removeClass("lse-active"):this.inputElements[s].add(".lse-exit-preview").addClass("lse-active");t&&$(".lse-exit-preview").removeClass("lse-active")},createEvents:function(){this.project.init(),$(".lse-exit-preview").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.preview.exit()})),$(".lse-toggle-timeline-view").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.preview.toggle("timeline")})),$(".lse-exit-timeline-view").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.preview.exit("timeline")})),$(".lse-toggle-layer-preview").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.preview.toggle("layer")})),$(".lse-exit-layer-preview").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.preview.exit("layer")})),$(".lse-toggle-slide-preview").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.preview.toggle("slide")})),$(".lse-exit-slide-preview").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.preview.exit("slide")})),$(".lse-toggle-project-preview").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.preview.toggle("project")})),$(".lse-exit-project-view").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.preview.exit("project")})),$("#lse-make-project-scrollable").on("click."+lsEditor.settings.nameSpace,(function(){let e=$("#lse-project-preview")[0].contentWindow.jQuery;$(this).is(":checked")?(lsEditor.preview.setProjectScrollable(!0),e("body").addClass("lse-show-scroll-icon")):(lsEditor.preview.setProjectScrollable(!1),e("body").removeClass("lse-show-scroll-icon"))}))},setProjectScrollable:function(e){let t=$("#lse-project-preview")[0].contentWindow.jQuery;e?($("#lse-project-preview").removeAttr("scrolling"),t("body").addClass("lse-scrollable"),t("body, html").scrollTop(t("#lse-project-scroll-wrapper").height()/3)):($("#lse-project-preview").attr("scrolling","no"),t("body").removeClass("lse-scrollable"))},enter:function(e,t){this.state=e,lsEditor.preview[e].enter(t),this.updateElements(e),lsEditor.layers.highlight.hide()},exit:function(e,t){this.state&&(e=e||this.state,this.state=!1,lsEditor.preview[e].exit()),this.updateElements(e,!0)},toggle:function(e){if(this.state&&e){if(this.state==e)return lsEditor.preview.exit(e);lsEditor.preview.exit(this.state),lsEditor.preview.enter(e)}else!this.state&&e&&lsEditor.preview.enter(e)},layer:{enter:function(e){LayerSlider.startLayerPreview(e)},exit:function(e){LayerSlider.stopLayerPreview(e)}},slide:{enter:function(e){$lsE.addClass("lse-slide-preview"),LayerSlider.startSlidePreview(e)},exit:function(e){$lsE.removeClass("lse-slide-preview"),LayerSlider.stopSlidePreview(e)}},popup:{enter:function(e){},exit:function(e){}},project:{init:function(){let e=setInterval((()=>{jQuery("#lse-project-preview")[0].contentWindow.previewGoogleFonts&&(clearInterval(e),LayerSlider.loadPreviewGoogleFonts())}),500)},enter:function(e){lsEditor.loading.show($lsEpf),$lsE.addClass("lse-project-view"),setTimeout((function(){LayerSlider.startProjectPreview()}),400)},exit:function(e){$lsE.removeClass("lse-project-view"),LayerSlider.stopProjectPreview(),lsEditor.preview.setProjectScrollable(!1)}},timeline:{enter:function(e){lsEditor.loading.show($lsEtimeline),$lsE.addClass("lse-timeline-view"),lsEditor.workspace.update("resizeWorkspace"),lsEditor.workspace.zoom.checkFit(),LayerSlider.startSlidePreview({autoStart:!1,pauseLayers:!0,plugins:[{namespace:"timeline"}]})},exit:function(e){LayerSlider.stopSlidePreview(),$lsE.removeClass("lse-timeline-view"),lsEditor.workspace.update("resizeWorkspace"),lsEditor.workspace.zoom.checkFit()}}},project:{init:function(){this.setLayout()},createEvents:function(){$(".lse-project-layout").on("click",(function(){let e=$(this),t=e.data("layout");e.hasClass("lse-locked")||lsEditor.project.changeLayout(t)})),$("#lse-show-advanced-settings").on("change",(function(){$("#lse-project-settings-content").toggleClass("lse-show-advanced-settings")}))},changeLayout:function(e){window.lsSliderData.properties.type=e,lsEditor.workspace.setSize(),LayerSlider.generatePreview(),this.setLayout(e),lsSetEditorDirtyState(!0)},setLayout:function(e){e=e||window.lsSliderData.properties.type,$("#lse-project-layouts-content").attr("data-layout",e),$(".lse-project-layout").removeClass("lse-active"),$('.lse-project-layout[data-layout="'+e+'"]').addClass("lse-active"),LayerSlider.updatePopupNotifications()}},revisions:{isActive:!1,inputElements:$(".lse-toggle-revisions, .lse-exit-revisions"),createEvents:function(){$(".lse-toggle-revisions").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.revisions.isActive?lsEditor.revisions.exit():lsEditor.revisions.enter()})),$(".lse-exit-revisions").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.revisions.exit()}))},enter:function(){this.inputElements.addClass("lse-active"),this.isActive=!0,LS_Revisions.open()},exit:function(){LS_Revisions.close(),this.isActive=!1,this.inputElements.removeClass("lse-active"),$lsE.removeClass("lse-show-revisions"),lsEditor.workspace.update("resizeWorkspace"),lsEditor.workspace.zoom.checkFit()}},rulers:{options:{orientation:"horizontal",length:null,thickness:20,pixelRatio:window.devicePixelRatio||1,majorTicks:100,majorTicksOffset:0,majorTicksColor:"#888",middleTicks:50,middleTicksOffset:10,middleTicksColor:"#777",minorTicks:10,minorTicksOffset:16,minorTicksColor:"#777",labelPrefix:"",labelSuffix:"",labelFont:'11px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',labelAlign:"left",labelOffsetX:4,labelOffsetY:4,labelColor:"#999",min:-5e3,max:5e3,zoom:1,debug:!1},init:function(){try{this.build({element:$("#lse-timeline-ruler-wrapper canvas")[0],min:0,max:100,zoom:150,labelSuffix:"s",labelFont:'12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',majorTicks:1,middleTicks:.5,minorTicks:.1})}catch(e){}},redraw:function(){try{this.build({element:$("#lse-ruler-wrapper-h canvas")[0],min:-3e3,max:3e3,middleTicks:lsEditor.workspace.zoom.settings.value>=.75?50:0,zoom:lsEditor.workspace.zoom.settings.value||1}),this.build({element:$("#lse-ruler-wrapper-v canvas")[0],orientation:"vertical",min:-2500,max:2500,middleTicks:lsEditor.workspace.zoom.settings.value>=.75?50:0,zoom:lsEditor.workspace.zoom.settings.value||1})}catch(e){}},build:function(e){var t,s,l,o,i,r,a,n,d=(e=$.extend({},this.options,e)).element,c=d.getContext("2d"),p="h"===e.orientation[0];e.length||(e.length=Math.abs(e.max-e.min)),p?(t=e.length*e.zoom,s=e.thickness):(t=e.thickness,s=e.length*e.zoom),$(d).attr({width:t*e.pixelRatio,height:s*e.pixelRatio}).css({width:t,height:s}),c.scale(e.pixelRatio,e.pixelRatio),c.clearRect(0,0,d.width,d.height),c.font=e.labelFont,c.fillStyle=e.labelColor,c.textAlign=e.labelAlign,c.textBaseline="top";for(var u=e.min;u<=e.max;u=Math.round(100*(u+e.minorTicks))/100)c.beginPath(),l=u+Math.abs(e.min),e.majorTicks&&u%e.majorTicks==0?(o=e.majorTicksOffset,c.strokeStyle=e.majorTicksColor):e.middleTicks&&u%e.middleTicks==0?(o=e.middleTicksOffset,c.strokeStyle=e.middleTicksColor):(o=e.minorTicksOffset,c.strokeStyle=e.minorTicksColor),i=l*e.zoom,r=l*e.zoom,a=o,n=e.thickness,p||(i=o,r=e.thickness,a=l*e.zoom,n=l*e.zoom),u%e.majorTicks==0&&(p?c.fillText(e.labelPrefix+u+e.labelSuffix,i+e.labelOffsetX,a+e.labelOffsetY):(c.save(),c.translate(i+e.labelOffsetX,a-e.labelOffsetY),c.rotate(-Math.PI/2),
c.fillText(e.labelPrefix+u+e.labelSuffix,0,0),c.restore())),c.moveTo(i,a),c.lineTo(r,n),c.stroke()}},sidebar:{wide:function(e,t,s){$lsE["true"==e?"addClass":"removeClass"]("lse-wide-right-sidebar"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action"),lsEditor.workspace.update(),lsEditor.workspace.zoom.checkFit()}},slidesList:{nameSpace:"slidesList",createEvents:function(){$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.slidesList.nameSpace,"",(function(e){let t=$(e.target);t.is($lsEslidesList)||t.closest("lse-slides-list").length||t.is("#lse-show-slides-list")||t.closest("#lse-show-slides-list").length||t.is("#lse-context-menu-slide-settings")||t.closest("#lse-context-menu-slide-settings").length||lsEditor.slidesList.close()}))},toggle:function(){$("lse-slides-list").toggleClass("lse-opened")},open:function(){$("#lse-show-slides-list").addClass("lse-active"),$("lse-slides-list").addClass("lse-opened")},close:function(){$("#lse-show-slides-list").removeClass("lse-active"),$("lse-slides-list").removeClass("lse-opened")}},slideMenu:{nameSpace:"slideMenu",init:function(){$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.slideMenu.nameSpace,"lse-slide-menu [data-slide-to] > lse-button, lse-slide-menu lse-button[data-slide-to]",(function(e){e.stopPropagation();var t=$(this),s=t.data("index")||t.index()+1,l=t.closest("lse-slide-menu"),o=l.find("lse-slide-menu-wrapper"),i=t.closest("lse-slide-menu-wrapper"),r=i.index()+1,a=t.data("slide-to")||i.find("lse-slide-menu-holder").data("slide-to"),n=("next"==a?o.eq(r):$(a)).index()+1,d=l.data("prev-index");lsEditor.slideMenu.slide(l,r,n,s,d)})),$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.slideMenu.nameSpace,"lse-slide-menu .lse-slide-menu-nav-back",(function(e){e.stopPropagation();var t=$(this).closest("lse-slide-menu"),s=t.data("cur-index");lsEditor.slideMenu.slide(t,s,s-1)}))},slide:function(e,t,s,l,o){l=l||1;var i=e.find("lse-slide-menu-style-wrapper").width(),r=e.find("lse-slide-menu-inner"),a=e.find("lse-slide-menu-wrapper"),n=a.eq(s-1).find("lse-slide-menu-holder"),d=n.eq(l-1);r.height(r.height()),o&&a.eq(o-1).find(".lse-visible").removeClass("lse-visible"),n.find(".lse-visible").removeClass("lse-visible"),d.addClass("lse-visible"),r.css({height:d.height(),transform:"translateX("+i*(1-s)+"px)"}),e.data("prev-index",t),e.data("cur-index",s),e.attr("data-previous-index",t),e.attr("data-current-index",s)},reset:function(e){e.find("lse-slide-menu-inner");e.find(".lse-visible").removeClass("lse-visible"),e.find("lse-slide-menu-holder").first().addClass("lse-visible"),e.removeData().find("lse-slide-menu-inner").css({transform:"translateX(0)",height:"auto"})},slideTo:function(e,t){let s=lsEditor.cache.getItem(e);s.closest("lse-submenu-wrapper").length&&(s.closest("lse-submenu-wrapper").hasClass("lse-visible")?lsEditor.slideMenu.reset(s):s.closest("lse-submenu-wrapper").find("lse-button, .lse-button").eq(0).click()),s.find('[data-name="'+t+'"]').click()}},smartDropdown:{nameSpace:"smartDropdown",init:function(){$(".lse-smart-dropdown-wrapper").each((function(){let e=$(this),t=e.find(".lse-active");e.find("lse-text").html(t.html())}))},createEvents:function(){$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.smartDropdown.nameSpace,".lse-smart-dropdown-wrapper",(function(e){let t=$(this),s=$(this).closest(".lse-smart-dropdown-wrapper"),l=$(e.target);if(t.toggleClass("lse-visible"),l.is("lse-li")||l.closest("lse-li").length){let e=l.is("lse-li")?l:l.closest("lse-li");s.find("lse-text").html(e.html()),e.addClass("lse-active").siblings().removeClass("lse-active")}})),$("body").on("mouseleave."+lsEditor.settings.nameSpace+lsEditor.smartDropdown.nameSpace,".lse-smart-dropdown-wrapper",(function(e){$(this).removeClass("lse-visible")}))},updateValue:function(e,t){$(e).find("lse-text").html($(e).find('[data-name="'+t+'"]').html())}},smartHelp:{nameSpace:"smartHelp",state:"closed",smartOperationValues:[],createEvents:function(){$("body").on("mouseenter."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace,"lse-fe-wrapper.lse-smart-help",(function(){let e=$(this);e.find("lse-smart-help-icon").length||e.append("<lse-smart-help-icon></lse-smart-help-icon>")})),$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace,"lse-ul.lse-smart-inject lse-li",(function(){lsEditor.smartHelp.$wrapper&&lsEditor.smartHelp.$wrapper.find("input").trigger("track.lse-undomanager").val($(this).attr("data-smart-inject")).trigger("input").trigger("change")}));$("body").on("mousedown."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace,(function(e){let t=$(e.target);if(t.is("lse-smart-help")||t.closest("lse-smart-help").length||$(".lse-focused").removeClass("lse-focused"),(t.is("input")||t.is("select")||t.is("lse-smart-help-icon")||t.is(".lse-color-input"))&&t.closest("lse-fe-wrapper.lse-smart-help").length&&t.closest("lse-fe-wrapper.lse-smart-help").addClass("lse-focused"),t.is("lse-smart-help-icon")){let e=t.closest("lse-fe-wrapper.lse-smart-help");if("opened"==lsEditor.smartHelp.state){if(e.is(lsEditor.smartHelp.$wrapper))return!1;lsEditor.smartHelp.close()}lsEditor.smartHelp.$wrapper=t.closest("lse-fe-wrapper.lse-smart-help"),lsEditor.smartHelp.open()}else"opened"!=lsEditor.smartHelp.state||t.is("lse-fe-wrapper.lse-smart-help")||t.closest("lse-fe-wrapper.lse-smart-help").length&&t.closest("lse-fe-wrapper.lse-smart-help").is(lsEditor.smartHelp.$wrapper)||t.is("lse-smart-help")||t.closest("lse-smart-help").length||lsEditor.smartHelp.close()})),$("body").on("input."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace,".lse-smart-operations-input",(function(e){let t=$("lse-smart-help.lse-visible lse-smart-operations-content").addClass("lse-show-results"),s=t.find(".lse-smart-operations-results lse-grid"),l=t.find(".lse-smart-operations-placeholder-row"),o=s.last(),i=$(this),r=lsEditor.smartHelp.$wrapper.find("input"),a=r.attr("name"),n=r.data("default"),d=r.hasClass("lse-transition-prop")?"transition":"styles",c=i.val().replace(/\s/g,"").replace(/[^\d.+\-\/*]/g," ").replace(/\s*(\D+)\s*/g," $1").replace(/\s*(\.)\s*/g,"$1").trim(),p=c.split(" "),u=function(e){let t=parseFloat(e.replace(/[^\d.]/g,""));return!(!t&&0!==t)&&t},m=!!i.closest("lse-smart-operations-content").hasClass("lse-reverse-operations");i.val(c),o.empty();let f=[],h=[];$.each(LS_activeLayerIndexSet,(function(e,t){let s=LS_activeSlideData.sublayers[t];h.push(t),f.push(parseFloat(s[d][a]||n||0))})),m&&(f.reverse(),h.reverse());let g=f.slice();for(let e=0;e<p.length;e++){let t=u(p[e]),s=t,l=p[e].replace(/\d+/g,"").replace(/\./g,"")||"=";if(t||0===t)for(let e=0;e<g.length;e++){switch(l){case"=":g[e]=t;break;case"+":g[e]+=t;break;case"-":g[e]-=t;break;case"*":g[e]*=t;break;case"/":g[e]/=t;break;case"++":g[e]=g[e]+t*e;break;case"--":g[e]=g[e]-t*e;break;case"+*":0===e?g[e]=g[e]:(g[e]=g[e]+t,t*=2);break;case"-*":0===e?g[e]=g[e]:(g[e]=g[e]-t,t*=2);break;case"**":0===e?g[e]=g[e]:(g[e]=g[e]*t,t*=s);break;case"//":0===e?g[e]=g[e]:(g[e]=g[e]/t,t*=s);break;case"*+":g[e]=g[e]*(0==e?1:t*e);break;case"/+":g[e]=g[e]/(0==e?1:t*e);break;case"+++":g[e]=g[e]+t*(e+1);break;case"---":g[e]=g[e]-t*(e+1);break;case"++*":g[e]=g[e]+t,t*=2;break;case"--*":g[e]=g[e]-t,t*=2;break;case"***":g[e]=g[e]*t,t*=s;break;case"///":g[e]=g[e]/t,t*=s;break;case"**+":g[e]=g[e]*t*(e+1);break;case"//+":g[e]=g[e]/(t*(e+1))}g[e]=parseFloat(g[e].toFixed(2))}}for(let e=0;e<f.length;e++){let t=l.clone().removeClass("lse-smart-operations-placeholder-row"),s=$("#lse-layers-list").children().eq(h[e]).clone();t.find(".lse-layer-thumb-placeholder").append(s.find(".lse-layer-thumb-wrapper")),t.find(".lse-layer-name-placeholder").append("<lse-text>"+s.find(".lse-layer-text input").val()+"</lse-text>"),t.find(".lse-original-value-placeholder").text(f[e]),t.find(".lse-new-value-placeholder").text(g[e]),o.append(t)}m&&g.reverse(),lsEditor.smartHelp.smartOperationValues=g})),$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace,".lse-smart-operations-results .lse-apply-button",(function(){let e=lsEditor.smartHelp.$wrapper,t=e.find("input"),s=t.attr("name"),l=t.hasClass("lse-transition-prop")?"transition":"styles",o=[],i="layer.transition";t.hasClass("lse-style-prop")&&(i="layer.style"),$.each(LS_activeLayerIndexSet,(function(e,t){let i=LS_activeSlideData.sublayers[t],r={},a={};r[s]=i[l][s],a[s]=lsEditor.smartHelp.smartOperationValues[e],i[l][s]=lsEditor.smartHelp.smartOperationValues[e],o.push({itemIndex:t,redo:a,undo:r})})),o.length&&LS_UndoManager.add(i,"LAYER_SMART_OPERATION",o);let r=t.attr("placeholder");t.val("").attr("placeholder",LS_l10n.SBSOPlaceholder),e.addClass("lse-smart-operation-applied"),LayerSlider.generateSelectedPreviewItems(),setTimeout((function(){t.attr("placeholder",r),e.removeClass("lse-smart-operation-applied")}),2e3)})),$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace,".lse-collect-values lse-button",(function(){lsEditor.smartHelp.getValuesFromSmartInputs($(this).closest(".lse-collect-values"))})),$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace,".lse-toggle-sort",(function(){let e=lsEditor.smartHelp.$smartHelp;e.find("lse-smart-operations-content").toggleClass("lse-reverse-operations"),e.find(".lse-smart-operations-input").trigger("input")}))},init:function(){lsEditor.smartHelp.$smartHelp=$("lse-smart-help").prependTo("body"),lsEditor.smartHelp.$smartHelpTitle=lsEditor.smartHelp.$smartHelp.find("lse-smart-help-title"),lsEditor.smartHelp.$smartHelpContent=lsEditor.smartHelp.$smartHelp.find("lse-smart-help-content"),lsEditor.smartHelp.$smartHelpGrid=lsEditor.smartHelp.$smartHelp.find("lse-grid.lse-smart-help-cols"),lsEditor.smartHelp.$smartHelpOuter=lsEditor.smartHelp.$smartHelp.find("lse-smart-help-outer")},open:function(){lsEditor.smartHelp.$wrapper.addClass("lse-show-smart-help"),lsEditor.smartHelp.$input=lsEditor.smartHelp.$wrapper.find('input[type="text"], input[type="number"], textarea, select').eq(0);let e=lsEditor.smartHelp.$wrapper.attr("data-smart-help"),t=lsEditor.smartHelp.$wrapper.attr("data-smart-options"),s=lsEditor.smartHelp.$wrapper.attr("data-smart-load"),l=void 0!==lsEditor.smartHelp.$wrapper.attr("data-smart-operations"),o=void 0!==lsEditor.smartHelp.$wrapper.attr("data-set-values"),i=lsEditor.smartHelp.$wrapper.attr("data-smart-help-title")||e,r=lsEditor.smartHelp.$wrapper.attr("data-smart-options-title")||i,a=lsEditor.smartHelp.$wrapper.attr("data-smart-help-filter")||"",n=lsEditor.smartHelp.$smartHelp,d=lsEditor.smartHelp.$smartHelpGrid,c=lsEditor.smartHelp.$smartHelpTitle,p=lsEditor.smartHelp.$smartHelpContent;lsEditor.smartHelp.$smartHelpOuter;c.text(i);let u=$('lse-smart-help-contents [data-smart-help="'+e+'"]');if(u.length&&p.show().html(u.html()),p.isEmpty()&&p.hide(),t||s)var m=$("<lse-col></lse-col>").appendTo(d);if(t){if($("lse-smart-options-content").clone().html($('lse-smart-options-contents [data-smart-options="'+t+'"]').html()).appendTo(m),void 0===lsEditor.smartHelp.$wrapper.attr("data-hide-smart-options-title")){(m.find(".lse-smart-inject").length?$("lse-smart-examples-title"):$("lse-smart-options-title")).clone().prependTo(m).find("lse-i").text(r)}}else if(s){let e=m;$(s).clone().appendTo(e)}if($("<lse-b>").insertBefore($("lse-smart-help-elements .lse-show-more").clone().insertBefore(n.find(".lse-more"))),l&&LS_multipleSelection){var f=$("<lse-col></lse-col>").appendTo(d);$("lse-smart-operations-title").clone().appendTo(f),$("lse-smart-operations-content").clone().appendTo(f),(t||s)&&n.addClass("lse-smart-help-wide")}if(o&&lsEditor.smartHelp.getValueFromInput(lsEditor.smartHelp.$input.val()),this.reposition(),a&&n.attr("data-filter",a),"fontfamily"===e){let e=n.find(".lse-smart-help-fonts-in-projects"),t=e.find("lse-ul");lsSliderData.googlefonts&&lsSliderData.googlefonts.length&&(e.removeClass("lse-dn"),t.empty(),jQuery.each(lsSliderData.googlefonts,(function(e,s){let l=s.param,o=-1!==s.param.indexOf(" ")?"'"+s.param+"'":s.param;t.append('<lse-li data-smart-inject="'+o+'">'+l+"</lse-li>")})))}if(n.addClass("lse-visible"),setTimeout((function(){lsEditor.smartHelp.$wrapper.closest("lse-sidebar-section").trigger("scroll")}),10),$(window).on("resize."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace,(function(){lsEditor.smartHelp.reposition()})),lsEditor.smartHelp.$wrapper.closest("lse-sidebar-section").on("scroll."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace,(function(){lsEditor.smartHelp.reposition()})),s&&"lse-color-picker"===s){lsEditor.colorPicker.init(lsEditor.smartHelp.$smartHelp.find(".lse-color-picker"));let e=lsEditor.smartHelp.$wrapper.find("input");e.trigger("track.lse-undomanager").data("prevColor",e.data("color")),lsEditor.colorPicker.load(e.data("type"),e.data("color"),e),lsEditor.smartHelp.$wrapper.addClass("lse-has-color"),$("#lse-color-picker-input").attr("name",e.data("name")||"").addClass(e.data("class")||""),lsEditor.smartHelp.closeCallback=function(){let t=lsEditor.colorPicker.getJSON();e.attr("data-value",t).data("value",JSON.parse(t)),$(lsEditor.colorPicker.form.colorInput).minicolors("destroy"),delete lsEditor.colorPicker.form.colorInput,$("#lse-color-picker-input").attr("name","").removeClass(e.data("class")||"")}}lsEditor.smartHelp.state="opened"},getValueFromInput:function(e){let t=e.replace(/;/g,"").replace(/ +(?= )/g,"").replace(/\(\s/g,"(").replace(/\s\(/g,"(").replace(/\s\)/g,")").replace(/\spx/g,"px").replace(/\s\%/g,"%").replace(/\sdeg/g,"deg").trim().replace(/(\(.*?\))/g,(function(e){return e.replace(/ /g,"_")})).split(" "),s=[],l=[];t=removeEmptyElements(t);for(let e=0;e<t.length;e++)if(-1!==t[e].indexOf("(")?(l[e]=t[e].substring(t[e].indexOf("(")+1,t[e].lastIndexOf(")")).replace(/_/g," ").trim().toLowerCase(),s[e]=t[e].split("(")[0].trim().toLowerCase()):l[e]=t[e].trim().toLowerCase(),"50%"===l[e])l[e]="center";0===s.length&&(s=!1);let o=lsEditor.smartHelp.$smartHelp.find(".lse-collect-values");if(o.is(".lse-form-rows"))for(let e=0;e<l.length;e++)lsEditor.formRows.add(o,!0);let i=o.find(".lse-key:not(.lse-placeholder .lse-key)"),r=o.find(".lse-value:not(.lse-placeholder .lse-value)");o.length&&r.length&&r.each((function(e){i.length&&lsEditor.smartHelp.applyValuesToInputs(i.eq(e),s[e]),lsEditor.smartHelp.applyValuesToInputs($(this),l[e])}))},applyValuesToInputs:function(e,t){switch(e[0].nodeName.toLowerCase()){case"select":if(e.find('option[value="'+t+'"]').length){e.find(":selected").prop("selected",!1),e.find('option[value="'+t+'"]').prop("selected",!0).attr("data-value");let s=e.find('option[value="'+t+'"]').attr("data-unit")||"";e.closest(".lse-form-row").find("lse-unit").text(s)}break;case"input":let s=e.next("lse-unit").text();s.length&&t.slice(-s.length)===s&&(t=parseFloat(t)),e.val(t)}},getValuesFromSmartInputs:function(e){let t=e.find(".lse-key"),s=!!t.length,l=e.find(".lse-value"),o="";l.each((function(e){let l=s?t.eq(e).val().trim():"",i=$(this).val().trim(),r=$(this).next("lse-unit").text();if(r.length&&i.length&&-1===i.indexOf(r)&&(i+=r),s&&(""==l||""==i))return!0;s&&(o+=""!==l?l+"(":""),o+=""!==i?i:"",s&&""!==l&&(o+=")"),o+=" "})),lsEditor.smartHelp.applyValueBackToOpenerInput(o.trim())},applyValueBackToOpenerInput:function(e){lsEditor.smartHelp.$input.trigger("track.lse-undomanager").val(e).trigger("input").trigger("change"),lsEditor.smartHelp.close()},close:function(){if(lsEditor.smartHelp.$wrapper){var e=lsEditor.smartHelp.$wrapper.attr("data-smart-load");if(lsEditor.smartHelp.closeCallback&&(lsEditor.smartHelp.closeCallback(),lsEditor.smartHelp.closeCallback=!1),e&&"lse-color-picker"===e){let e=lsEditor.smartHelp.$wrapper.find("input"),t=e.val();t&&"transparent"!==t&&lsEditor.smartHelp.$wrapper.addClass("lse-has-color"),e.trigger("input").trigger("change"),LS_GUI.updateColorPicker(e.data("prop"),t,e.data("color"))}lsEditor.smartHelp.$wrapper.removeClass("lse-focused lse-show-smart-help"),lsEditor.smartHelp.$smartHelp.removeAttr("data-filter"),lsEditor.smartHelp.$smartHelp.removeClass("lse-visible lse-smart-help-wide"),lsEditor.smartHelp.$smartHelpTitle.empty(),lsEditor.smartHelp.$smartHelpContent.empty(),lsEditor.smartHelp.$smartHelpGrid.empty(),lsEditor.smartHelp.$smartHelpOuter.empty(),$(window).off("resize."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace),$("lse-sidebar-section").off("scroll."+lsEditor.settings.nameSpace+lsEditor.smartHelp.nameSpace)}lsEditor.smartHelp.$wrapper=!1,this.state="closed"},reposition:function(){let e=lsEditor.smartHelp.$wrapper.offset().top+lsEditor.smartHelp.$wrapper.outerHeight()/2,t=e,s=$("lse-smart-help").outerHeight(),l=20,o=e-s/2,i=lsEditor.windowHeight-e-s/2,r=lsEditor.smartHelp.$wrapper.closest("lse-col").length?lsEditor.smartHelp.$wrapper.closest("lse-col"):lsEditor.smartHelp.$wrapper.parent(),a=lsEditor.smartHelp.$wrapper.closest("lse-col").length?5:10;if(e<40||e>lsEditor.windowHeight-40)return lsEditor.smartHelp.close(),!1;o<l&&(t=e,e=s/2+l),i<l&&(t=e,e=lsEditor.windowHeight-s/2-l),$("lse-smart-help").css({left:r.offset().left-a,top:e}),$("lse-smart-help-arrow").css({marginTop:t-e})}},smartInputs:{nameSpace:"smartInputs",focusIn:function(e){e.addClass("lse-focused-col")},focusOut:function(){$(".lse-focused-col").removeClass("lse-focused-col")},createEvents:function(){$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.smartInputs.nameSpace,(function(e){lsEditor.smartInputs.focusOut();let t=$(e.target);(t.is("input")||t.is("select")||t.is("textarea")||t.is("lse-smart-help-icon"))&&t.closest("lse-col").length&&lsEditor.smartInputs.focusIn(t.closest("lse-col")),t.is("lse-smart-help-icon")&&t.closest("lse-fe-wrapper").find('input:not([type="hidden"])').eq(0).trigger("click")})),$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.smartInputs.nameSpace,"[data-prop-type]",(function(){let e=$(this);e.closest("lse-col").find("lse-cur-prop").text(e.attr("data-prop-type"))})),$("body").on("click."+lsEditor.settings.nameSpace+lsEditor.smartInputs.nameSpace,"[data-units]",(function(){let e=$(this);e.closest("lse-col").find("lse-units").text(e.attr("data-units"))}))}},tabs:{init:function(){$(".lse-tabs").each((function(){let e=$(this),t=$(e.data("tabs-for")),s=e.find(" > .lse-active"),l=e.children().filter(e.data("tabs-filter")||"*").filter(":not(.lse-exclude-from-tabs)"),o=l.index(s),i=t.children().filter(e.data("tabs-content-filter")||"*").filter(":not(.lse-exclude-from-tabs)");t.addClass("lse-tabs-contents"),i.not(":eq("+o+")").addClass("lse-tabs-content-inactive"),e.data("menuItems",l),e.data("tabsContents",i)}))},createEvents:function(){$(".lse-tabs").children().on("click",(function(){let e=$(this);if($tabsHolder=e.closest(".lse-tabs"),updateWorkspace=void 0!==$tabsHolder.attr("data-update-workspace"),index=$tabsHolder.data("menuItems").index(e),appendSelector=$tabsHolder.attr("data-append-to-active-tab")||!1,prependSelector=$tabsHolder.attr("data-prepend-to-active-tab")||!1,fName=!1,-1!==index){$tabsHolder.data("tabsContents").addClass("lse-tabs-content-inactive");let e=$tabsHolder.data("tabsContents").eq(index);e.removeClass("lse-tabs-content-inactive"),lsEditor.tabs.resetTabContentScroll(e)}let t=e.data("for-editor"),s=$tabsHolder.data("for-editor");s&&(t?$lsE.attr("data-"+s,t):$lsE.removeAttr("data-"+s)),appendSelector?fName="appendTo":prependSelector&&(fName="prependTo"),fName&&$(appendSelector)[fName]($tabsHolder.data("tabsContents").eq(index)),updateWorkspace&&(lsEditor.workspace.update(),lsEditor.workspace.zoom.checkFit())}))},resetTabContentScroll:function(e){e.scrollTop(0)}},tinyNote:{createEvents:function(){$lsEwf.on("mousemove."+lsEditor.settings.nameSpace,(function(){var e="",t="";(lsEditor.pointerPosX<0||lsEditor.pointerPosX>lsEditor.wcWidth)&&(e="lse-highlight"),(lsEditor.pointerPosY<0||lsEditor.pointerPosY>lsEditor.wcHeight)&&(t="lse-highlight");var s='<lse-text class="'+e+'">x: '+Math.round(lsEditor.pointerPosX/lsEditor.workspace.zoom.settings.value)+"</lse-text>"+('<lse-text class="'+t+'">y: '+Math.round(lsEditor.pointerPosY/lsEditor.workspace.zoom.settings.value)+"</lse-text>");lsEditor.tinyNote.update(s,50)})),$lsEwf.on("mousemoveend."+lsEditor.settings.nameSpace+" mouseleave."+lsEditor.settings.nameSpace,(function(){lsEditor.tinyNote.hide()}))},show:function(){this.isVisible||$lsEtinyNote.addClass("lse-visible"),this.isVisible=!0},hide:function(){$lsEtinyNote.removeClass("lse-visible"),this.isVisible=!1},update:function(e,t){this.isVisible||this.show(),!t||this.width&&this.width===t||(this.width=t,$lsEtinyNote.css("min-width",t)),$lsEtinyNote.html(e)}},tooltip:{nameSpace:"tooltip",createEvents:function(){$("body").on("mouseenter. "+lsEditor.settings.nameSpace+lsEditor.tooltip.nameSpace,"[data-tt]",(function(){LS_editorSettings.showTooltips&&lsEditor.tooltip.open($(this))})),$("body").on("mouseleave. "+lsEditor.settings.nameSpace+lsEditor.tooltip.nameSpace+" mousedown. "+lsEditor.settings.nameSpace+lsEditor.tooltip.nameSpace,"[data-tt]",(function(){LS_editorSettings.showTooltips&&lsEditor.tooltip.close()})),$("body").on("click. "+lsEditor.settings.nameSpace+lsEditor.tooltip.nameSpace,"[data-tt-c]",(function(){lsEditor.tooltip.open($(this),!0)}))},init:function(e){let t=e.attr("data-tt")||e.attr("data-tt-c")||"",s=t.length?$(t):e.next("lse-tt"),l=void 0!==e.attr("data-tt-c")&&!1!==e.attr("data-tt-c");e.data("tooltip",s),l&&s.addClass("lse-clickable"),s.appendTo("body")},setProperties:function(e,t){let s,l,o,i=Math.ceil(e.outerWidth()),r=Math.ceil(e.outerHeight()),a=e.offset(),n=e.attr("data-tt-pos")||"top",d=Math.ceil(t.outerWidth()),c=Math.ceil(t.outerHeight()),p=$.isNumeric(e.attr("data-tt-de"))?parseFloat(e.attr("data-tt-de")):.5,u=$.isNumeric(e.attr("data-tt-du"))?parseFloat(e.attr("data-tt-du")):.1,m=10,f=10,h=0,g=0;switch(n){case"top":a.top-c-6-f-m<0&&(n="bottom");break;case"bottom":a.top+r+c+6+f+m>lsEditor.windowHeight&&(n="top");break;case"left":a.left-d-6-f-m<0&&(n="right");break;case"right":a.left+i+d+6+f+m>lsEditor.windowWidth&&(n="left")}switch(n){case"top":case"bottom":s=a.left+i/2,s+d/2+f>lsEditor.windowWidth?h=lsEditor.windowWidth-(s+d/2+f):s-d/2-f<0&&(h=-(s-d/2-f));break;case"left":case"right":l=a.top+r/2,l+c/2+f>lsEditor.windowHeight?g=lsEditor.windowHeight-(l+c/2+f):l-c/2-f<0&&(g=-(l-c/2-f))}switch(n){case"top":o={left:s,top:a.top-6-m,transform:"translate(-50%, -100%)",marginLeft:h};break;case"bottom":o={left:s,top:a.top+r+6+m,transform:"translateX(-50%)",marginLeft:h};break;case"left":o={left:a.left-6-m,top:l,transform:"translate(-100%,-50%)",marginTop:g};break;case"right":o={left:a.left+i+6+m,top:l,transform:"translateY(-50%)",marginTop:g}}return t[0].style.setProperty("--delay",p+"s"),t[0].style.setProperty("--duration",u+"s"),t[0].style.setProperty("--arrowleft",-h+"px"),t[0].style.setProperty("--arrowtop",-g+"px"),t.attr("data-tt-pos",n).css({width:d}),o},open:function(e,t){e.data("tooltip")||this.init(e);let s=e.data("tooltip");s.length&&(s.css(this.setProperties(e,s)).addClass("lse-visible"),t&&$("body").on("click.closeClickableTooltip",(function(){$("body").off("click.closeClickableTooltip"),lsEditor.tooltip.close()})))},close:function(e){e&&e.length?e.data("tooltip").removeClass("lse-visible"):$("lse-tt").removeClass("lse-visible")}},workspace:{settings:{overScroll:150,modifiedOverScroll:150},init:function(){$("#lse-editor-form").prependTo("body"),$("body").addClass("lse-hide-wp").removeClass("wp-core-ui"),lsEditor.workspace.setSize(),$lsEtimeline.height(lsEditor.localStorage.data?.setProperties?.["lse-timeline-frame"]?.height||lsEditor.settings.timelineHeight),kmw.defaults.zIndex=1000040,kmw.modal.defaults.theme="lseditor",kmw.modal.defaults.modalScrollClasses="lse-scrollbar lse-scrollbar-dark",kmw.modal.defaults.sidebarScrollClasses="lse-scrollbar lse-scrollbar-light",kmw.modal.defaults.animationIn={easeIn:Quint.easeOut,easeOut:Quad.easeIn,delayIn:.1,delayOut:0,durationIn:.2,durationOut:.1,css:{opacity:0,scaleX:1.05,scaleY:.95}},kmw.overlay.defaults.animationIn={easeIn:Linear.easeNone,easeOut:Linear.easeNone,durationIn:.2,delayOut:.1,durationOut:.2,css:{opacity:0}}},createEvents:function(){$(window).on("resize."+lsEditor.settings.nameSpace,(function(e){lsEditor.workspace.update(),lsEditor.workspace.zoom.checkFit(),$lsEww.trigger("scroll")})),$lsEww.on("scroll."+lsEditor.settings.nameSpace,(function(e){lsEditor.workspace.update("scrollWorkspace")})),$lsEwf.on("mousemove."+lsEditor.settings.nameSpace,(function(e){lsEditor.workspace.getPointerPosition(e)})),$lsEwf.on("mouseenter."+lsEditor.settings.nameSpace,(function(){$lsEpointerH.show(),$lsEpointerV.show()})),$lsEwf.on("mouseleave."+lsEditor.settings.nameSpace,(function(){$lsEpointerH.hide(),$lsEpointerV.hide()})),$("#lse-toggle-fullscreen").on("click."+lsEditor.settings.nameSpace,(function(){lsEditor.workspace.toggleFullscreenMode()})),$(document).on("webkitfullscreenchange fullscreenchange",(function(e){var t=$("#lse-toggle-fullscreen");document.fullscreenElement||document.webkitFullscreenElement?t.addClass("lse-active"):(t.removeClass("lse-active"),lsEditor.workspace.afterExitFullscreen())})),$("body").on("mousemove."+lsEditor.settings.nameSpace,(function(e){void 0!==lsEditor.timeouts.mouseMoveEnd&&window.clearTimeout(lsEditor.timeouts.mouseMoveEnd),lsEditor.timeouts.mouseMoveEnd=window.setTimeout((function(){$(e.target).trigger("mousemoveend."+lsEditor.settings.nameSpace)}),lsEditor.settings.mouseMoveEndTimer)})),$("body").on("input."+lsEditor.settings.nameSpace,".lse-zoom-range, .lse-zoom-input",(function(e){let t=$(this),s=t.val();s>=lsEditor.workspace.zoom.settings.minPercentValue&&s<=lsEditor.workspace.zoom.settings.maxPercentValue&&lsEditor.workspace.zoom.set(s,t,e)})).on("blur."+lsEditor.settings.nameSpace,".lse-zoom-range, .lse-zoom-input",(function(){let e=$(this).val();e<lsEditor.workspace.zoom.settings.minPercentValue?$(this).val(lsEditor.workspace.zoom.settings.minPercentValue):e>lsEditor.workspace.zoom.settings.maxPercentValue&&$(this).val(lsEditor.workspace.zoom.settings.maxPercentValue)})),$("body").on("click."+lsEditor.settings.nameSpace,".lse-zoom-1",(function(e){lsEditor.workspace.zoom.set(100,$(this),e)})),$("body").on("click."+lsEditor.settings.nameSpace,".lse-zoom-fit",(function(e){lsEditor.workspace.zoom.settings.fitSize=!0,lsEditor.workspace.zoom.fitSize($(this),e)})),$("body").on("wheel."+lsEditor.settings.nameSpace,"lse-workspace-frame",(function(e){if(e.altKey){let t=e.originalEvent.deltaY<0?3:-3,s=lsEditor.workspace.zoom.settings.percentValue+t;s<lsEditor.workspace.zoom.settings.minPercentValue&&(s=lsEditor.workspace.zoom.settings.minPercentValue),s>lsEditor.workspace.zoom.settings.maxPercentValue&&(s=lsEditor.workspace.zoom.settings.maxPercentValue),lsEditor.workspace.zoom.set(s,!1,e)}})),$lsEtimeline.resizable({handles:{n:$("#lse-timeline-resize")},minHeight:130,maxHeight:610,grid:[0,48],stop:function(e,t){lsEditor.workspace.update("resizeWorkspace")}}),$("#lse-change-device-view lse-submenu lse-button").on("click",(function(){LS_activeScreenType=$(this).data("type"),LS_DataSource.buildLayersList(),lsEditor.preview.state?"layer"===lsEditor.preview.state?lsEditor.preview.exit("layer"):"slide"===lsEditor.preview.state?(lsEditor.preview.exit("slide"),lsEditor.preview.enter("slide")):"timeline"===lsEditor.preview.state?(lsEditor.preview.exit("timeline"),lsEditor.preview.enter("timeline")):"project"===lsEditor.preview.state&&(lsEditor.preview.setProjectScrollable(!1),LayerSlider.stopProjectPreview(),LayerSlider.startProjectPreview()):LayerSlider.generatePreview()})),$("[data-toggle-class]").on("change."+lsEditor.settings.nameSpace,(function(){let e=$(this),t=e.attr("data-toggle-class"),s=e.attr("data-toggle-selector"),l=e.attr("data-find-method")||!1,o=[["addClass","removeClass"],["removeClass","addClass"]],i=e.attr("data-reverse")?o[1]:o[0];if(l){if("closest"===l)e.closest(s)[e.is(":checked")?i[0]:i[1]](t)}else $(s)[e.is(":checked")?i[0]:i[1]](t)}))},getSize:function(){let e,t,s=window.lsSliderData.properties;return s.type&&"popup"===s.type?(e=s.popupWidth||640,t=s.popupHeight||360):(e=parseInt(s.sublayercontainer)||s.width||1280,t=s.height||720),{width:parseInt(e),height:parseInt(t)}},setSize:function(e,t){if(!e||!t){let s=lsEditor.workspace.getSize();e=s.width,t=s.height}$lsEwc.css({width:e*lsEditor.workspace.zoom.settings.value,height:t*lsEditor.workspace.zoom.settings.value}),lsEditor.workspace.zoom.updateAffectedElements("lse-workspace-content","width",e),lsEditor.workspace.zoom.updateAffectedElements("lse-workspace-content","height",t),$lsEpw.css({width:e,height:t}),lsEditor.workspace.update(),lsEditor.workspace.zoom.checkFit()},setProjectToCenter:function(e){let t=$lsE.hasClass("lse-hide-rulers")?0:lsEditor.rulers.options.thickness;e?(lsEditor.wcWidth<lsEditor.wfWidth-t-2*lsEditor.workspace.zoom.settings.fitSizePadding?$lsEww.scrollLeft((lsEditor.whWidth-lsEditor.wfWidth-t)/2):$lsEww.scrollLeft(lsEditor.workspace.settings.modifiedOverScroll-t-lsEditor.workspace.zoom.settings.fitSizePadding),lsEditor.wcHeight<lsEditor.wfHeight-t-2*lsEditor.workspace.zoom.settings.fitSizePadding?$lsEww.scrollTop((lsEditor.whHeight-lsEditor.wfHeight-lsEditor.heightModifier-t)/2):$lsEww.scrollTop(lsEditor.workspace.settings.modifiedOverScroll-t-lsEditor.workspace.zoom.settings.fitSizePadding)):($lsEww.scrollLeft((lsEditor.whWidth-lsEditor.wfWidth-t)/2),$lsEww.scrollTop((lsEditor.whHeight-lsEditor.wfHeight-lsEditor.heightModifier-t)/2))},zoom:{settings:{event:!1,$target:$(),minPercentValue:50,maxPercentValue:200,value:1,percentValue:100,fitSize:!1,fitSizePadding:20},affectedElements:{"lse-workspace-content":["width","height"],"lse-preview-wrapper":["scale"]},checkFit:function(e){this.settings.fitSize?this.fitSize():1==this.settings.value&&lsEditor.workspace.setProjectToCenter(!0)},updateInputs:function(){let e=$(".lse-zoom-fit"),t=$(".lse-zoom-1"),s=$(".lse-zoom-range, .lse-zoom-input");this.settings.event&&(this.settings.$target.is(e)?e.addClass("lse-active"):(lsEditor.workspace.zoom.settings.fitSize=!1,e.removeClass("lse-active"))),100==this.settings.percentValue?(t.addClass("lse-active"),this.settings.$target.is(t)&&lsEditor.workspace.setProjectToCenter(!0)):t.removeClass("lse-active"),s.not(this.settings.$target).val(this.settings.percentValue)},fitSize:function(e,t){let s=lsEditor.workspace.getSize(),l=100,o=$lsE.hasClass("lse-hide-rulers")?0:lsEditor.rulers.options.thickness,i=s.width/s.height,r=lsEditor.wfWidth-o-2*this.settings.fitSizePadding,a=lsEditor.wfHeight-lsEditor.heightModifier-o-2*this.settings.fitSizePadding;l=i<r/a?a/s.height*100:r/s.width*100,l=Math.ceil(l),lsEditor.workspace.zoom.set(l,e,t),lsEditor.workspace.setProjectToCenter()},updateAffectedElements:function(e,t,s){let l=lsEditor.workspace.zoom.affectedElements;if(l[e]){let o=$(e),i=l[e],r=i.length;for(prop=0;prop<r;prop++)t===i[prop]&&o.data("original"+i[prop],s)}},set:function(e,t,s,l){this.settings.$target=t||$(),this.settings.event=s||!1,this.settings.percentValue=parseInt(e),this.settings.value=e/100,LS_previewZoom=this.settings.value;let o=lsEditor.workspace.zoom.affectedElements;for(let t in o){let s=$(t),i=o[t],r=i.length;for(prop=0;prop<r;prop++){let t=i[prop],o="",r="";if("scale"===t)t="transform",o="scale(",r=")";if(l){let e=parseInt(s.css(t));e=$.isNumeric(e)?e:1,s.data("original"+t,e)}else s.css(t,o+s.data("original"+t)/100*e+r)}}lsEditor.rulers.redraw(),lsEditor.workspace.update(),LayerSlider.updatePreviewSelection(),LayerSlider.updateRulerLines(),this.updateInputs(),l&&lsEditor.workspace.setProjectToCenter(!0)}},update:function(e){lsEditor.workspace.settings.modifiedOverScroll=parseInt(lsEditor.workspace.settings.overScroll*lsEditor.workspace.zoom.settings.value),$lsEguidesH[0].style.setProperty("--overscroll",lsEditor.workspace.settings.modifiedOverScroll+"px"),$lsEguidesV[0].style.setProperty("--overscroll",lsEditor.workspace.settings.modifiedOverScroll+"px"),$lsEww[0].style.setProperty("--overscroll",lsEditor.workspace.settings.modifiedOverScroll+"px"),
lsEditor.currentTimelineHeight="timeline"==lsEditor.preview.state?$lsEtimeline.outerHeight():0,lsEditor.currentRevisionsHeight=lsEditor.revisions.isActive?$lsErevisions.outerHeight():0,lsEditor.heightModifier=lsEditor.currentTimelineHeight||lsEditor.currentRevisionsHeight||0,"timeline"==lsEditor.preview.state&&(lsEditor.settings.timelineHeight=lsEditor.heightModifier,lsEditor.localStorage.update("lse-timeline-frame",{height:lsEditor.settings.timelineHeight},"setProperties")),$lsEguidesV[0].style.setProperty("--heightmodifier",lsEditor.heightModifier+"px"),$lsEw[0].style.setProperty("--heightmodifier",lsEditor.heightModifier+"px"),lsEditor.wcWidth=$lsEwc.width(),lsEditor.wcHeight=$lsEwc.height(),$lsEsol.css({minWidth:lsEditor.wcWidth+2*lsEditor.workspace.settings.modifiedOverScroll,minHeight:lsEditor.wcHeight+2*lsEditor.workspace.settings.modifiedOverScroll}),lsEditor.windowWidth=$(window).width(),lsEditor.windowHeight=$(window).height(),$lsEwf.removeClass("lse-fix-one-pixel-horizontal lse-fix-one-pixel-vertical"),lsEditor.wcWidth&&($lsEwf.width()-lsEditor.wcWidth)%2!=0&&$lsEwf.addClass("lse-fix-one-pixel-horizontal"),lsEditor.wcHeight&&($lsEwf.height()-lsEditor.wcHeight)%2!=0&&$lsEwf.addClass("lse-fix-one-pixel-vertical"),lsEditor.wfWidth=$lsEwf.width(),lsEditor.wfHeight=$lsEwf.height(),lsEditor.wfOffset=$lsEwf.offset(),lsEditor.solWidth=lsEditor.wfWidth,lsEditor.solHeight=lsEditor.wfHeight,$lsEsol.width(lsEditor.solWidth),$lsEsol.height(lsEditor.solHeight),lsEditor.whWidth=$lsEwh.width(),lsEditor.whHeight=$lsEwh.height(),lsEditor.horRulerContainerMaxWidth=Math.max(lsEditor.wfWidth,lsEditor.whWidth),lsEditor.verRulerContainerMaxHeight=Math.max(lsEditor.wfHeight,lsEditor.whHeight),lsEditor.wcOffset=$lsEwc.offset(),$lsErulerH.css("left",lsEditor.wcOffset.left-lsEditor.wfOffset.left),$lsErulerV.css("top",lsEditor.wcOffset.top-lsEditor.wfOffset.top),$lsEguidesH.css("min-width",lsEditor.wfWidth),$lsEguidesV.css("min-height",lsEditor.wfHeight),$lsErulerWrapH.css("width",lsEditor.horRulerContainerMaxWidth),$lsErulerWrapV.css("height",lsEditor.verRulerContainerMaxHeight),lsEditor.whWidth>lsEditor.wfWidth?$("lse-stop-overflow-layers").addClass("lse-horizontal-fix"):$("lse-stop-overflow-layers").removeClass("lse-horizontal-fix"),lsEditor.whHeight>lsEditor.wfHeight?$("lse-stop-overflow-layers").addClass("lse-vertical-fix"):$("lse-stop-overflow-layers").removeClass("lse-vertical-fix"),$lsEd.css({left:lsEditor.wcOffset.left,top:lsEditor.wcOffset.top,width:lsEditor.wcWidth,height:lsEditor.wcHeight})},getPointerPosition:function(e){var t=e.pageX-lsEditor.wfOffset.left,s=e.pageY-lsEditor.wfOffset.top;$lsEpointerH.css("left",t),$lsEpointerV.css("top",s),lsEditor.pointerPosX=e.pageX-lsEditor.wcOffset.left,lsEditor.pointerPosY=e.pageY-lsEditor.wcOffset.top,$lsEwc.data("lsRulerPos",{x:t,y:s})},toggleFullscreenMode:function(){var e=document.fullscreenElement||document.webkitFullscreenElement,t=document.body.requestFullscreen?"requestFullscreen":"webkitRequestFullscreen",s=document.exitFullscreen?"exitFullscreen":"webkitExitFullscreen";e?document[s]():(document.body[t]({navigationUI:"hide"}),lsEditor.workspace.update())},afterExitFullscreen:function(){setTimeout((function(){$lsE.css({width:0,height:0}).css({width:"100vw",height:"100vh"}),$(window).trigger("resize"),lsEditor.workspace.update()}),100),lsEditor.workspace.update()},bringSelectionToFront:function(e,t,s){$lsE["true"==e?"addClass":"removeClass"]("lse-selection-is-on-front"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action")},showRulers:function(e,t,s){$lsE["true"==e?"removeClass":"addClass"]("lse-hide-rulers"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action"),lsEditor.workspace.zoom.checkFit()},showGuides:function(e,t,s){$lsE["true"==e?"removeClass":"addClass"]("lse-hide-guides"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action")},overflowLayers:function(e,t,s){$lsE["true"==e?"removeClass":"addClass"]("lse-hide-overflow-layers"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action")},showTinyNote:function(e,t,s){$lsE["true"==e?"removeClass":"addClass"]("lse-hide-tiny-note"),"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action")},setOverscroll:function(e,t,s){"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action"),lsEditor.workspace.settings.overScroll=e,lsEditor.workspace.update()},autoCloseSectionTabs:function(e,t,s){"skipSave"!==s&&lsEditor.localStorage.update(t,e,"action"),lsEditor.workspace.settings.autoCloseSectionTabs="true"===e}}}),lsEditor.init()}));var lsEditorColorStop=function(e){return(e.constructor.prototype=e).constructor}({constructor:function(e,t){this.color=e,this.stop=t},toString:function(){return this.color+" "+this.stop}});